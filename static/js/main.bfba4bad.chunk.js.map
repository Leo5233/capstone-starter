{"version":3,"sources":["components/AlphaLogo.jsx","components/SlideImg.jsx","components/AuthInput.jsx","pages/LoginPage.jsx","pages/EntrancePage.jsx","pages/SignupPage.jsx","components/Category.jsx","components/AlbumCollection.jsx","pages/Search.jsx","components/PodcastItemCollection.jsx","components/CenterContent.jsx","components/NowPlayItem.jsx","pages/MainPage.jsx","pages/TrackPage.jsx","App.jsx","reportWebVitals.js","index.js"],"names":["AlphaLogo","_ref","width","_jsx","src","alt","SlideImg","photoId","handleClickArrowMinus","handleClickArrowPlus","handleClickBar","_jsxs","className","style","backgroundImage","concat","children","onClick","AuthInput","type","label","value","placeholder","onChange","e","target","LoginPage","navigate","useNavigate","_useState","useState","_useState2","_slicedToArray","setUserName","_useState3","_useState4","setPassword","_useState5","_useState6","setPhotoId","_Fragment","password","href","Number","items","document","querySelectorAll","console","log","length","dataset","id","EntrancePage","SignUpPage","setName","_useState7","_useState8","setEmail","_useState9","_useState10","Category","title","active","onClickToggle","CategoryCollection","_ref2","categories","nowCategoryId","localStorage","getItem","map","category","AlbumCollection","searchResult","album","images","url","name","artists","SearchPage","spotifyApi","SpotifyWebApi","searchInput","setSearchInput","accessToken","setAccessToken","albumList","setAlbumList","getAuthToken","_getAuthToken","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","clientId","clientSecret","authParameters","wrap","_context2","prev","next","method","headers","btoa","body","fetch","then","result","json","data","access_token","stop","useEffect","handleChangeInput","_callee","_context","search","limit","albums","err","error","_x","content","controls","nowSelectedItem","querySelector","classList","remove","parentElement","toggle","newCategories","JSON","parse","_objectSpread","_toConsumableArray","image","img","artist","setItem","stringify","PodcastItemCollection","listItems","podcastItem","CenterContent","dummyCategory","onClickMore","onClickPlay","onClickSubscribe","tracks","track","audio","duration","Math","round","NowPlayItem","nowPlayItemInfo","duration_ms","totalSecond","floor","calculateTime","player","includes","pause","play","MainPage","setNowCategoryId","inputCategoryName","setInputCategoryName","setCategories","setNowPlayItemInfo","nowCategoryName","setNowCategoryName","localCategories","localCategoryId","handleShowModal","blurcover","editPanel","split","modal","add","handleClickGoBack","forEach","nowCategory","position","element","x","y","offsetLeft","scrollLeft","clientLeft","offsetTop","clientTop","offsetParent","getPosition","top","left","removeItem","nowPlayItem","load","time","oldAcitveItem","targetClass","subscribedList","newSubscribedList","filter","item","Swal","fire","imageUrl","imageWidth","imageHeight","imageAlt","timer","showConfirmButton","padding","newData","alert","TrackPage","tracksContent","setTracksContent","bugCounter","setBugCounter","nowPlay","handleClickPlay","handleClickToggleSubscribe","albumId","albumIcon","subscribedIds","getAlbumTracks","preview_url","getAlbumTrack","App","BrowserRouter","Routes","Route","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","getElementById","render","React","StrictMode"],"mappings":"yWAAO,SAASA,EAASC,GAAW,IAARC,EAAKD,EAALC,MAC1B,OACEC,cAAA,OAAKC,IAAI,8FAA8FC,IAAI,OAAOH,MAAOA,GAE7H,CCJO,IAAMI,EAAW,SAAHL,GAAiF,IAA3EM,EAAON,EAAPM,QAASC,EAAqBP,EAArBO,sBAAuBC,EAAoBR,EAApBQ,qBAAsBC,EAAcT,EAAdS,eAC/E,OACEC,eAAA,OAAKC,UAAU,aAAaC,MAAO,CAAEC,gBAAgB,0FAADC,OAA4FR,EAAO,WAAWS,SAAA,CAChKb,cAAA,OAAKS,UAAU,iBAAiBK,QAAST,EAAsBQ,SAAC,WAChEb,cAAA,OAAKS,UAAU,aAAaK,QAASR,EAAqBO,SAAC,WAC3DL,eAAA,OAAKC,UAAU,aAAaK,QAASP,EAAeM,SAAA,CAClDb,cAAA,OAAKS,UAAU,YAAY,UAAQ,MACnCT,cAAA,OAAKS,UAAU,YAAY,UAAQ,MACnCT,cAAA,OAAKS,UAAU,YAAY,UAAQ,WAI3C,ECZaM,EAAY,SAAHjB,GAAuD,IAAjDkB,EAAIlB,EAAJkB,KAAMC,EAAKnB,EAALmB,MAAOC,EAAKpB,EAALoB,MAAOC,EAAWrB,EAAXqB,YAAaC,EAAQtB,EAARsB,SAC3D,OACEZ,eAAA,OAAKC,UAAU,kBAAiBI,SAAA,CAC9Bb,cAAA,SAAOS,UAAU,cAAaI,SAAEI,IAChCjB,cAAA,SAAOS,UAAU,aAAaO,KAAMA,GAAQ,OAAQG,YAAaA,EAC/DD,MAAOA,EACPE,SAAU,SAACC,GAAC,OAAKD,EAASC,EAAEC,OAAOJ,MAAM,MAGjD,ECFaK,EAAY,WACvB,IAAMC,EAAWC,cACjBC,EAAgCC,mBAAS,IAAGC,EAAAC,YAAAH,EAAA,GAA3BI,GAAFF,EAAA,GAAaA,EAAA,IAC5BG,EAAgCJ,mBAAS,IAAGK,EAAAH,YAAAE,EAAA,GAA3BE,GAAFD,EAAA,GAAaA,EAAA,IAC5BE,EAA8BP,mBAAS,GAAEQ,EAAAN,YAAAK,EAAA,GAAlC9B,EAAO+B,EAAA,GAAEC,EAAUD,EAAA,GAgB1B,OAAQnC,cAAAqC,WAAA,CAAAxB,SACNL,eAAA,OAAKC,UAAU,qBAAoBI,SAAA,CACjCb,cAAA,OAAKS,UAAU,2BAA0BI,SACvCL,eAAA,OAAKC,UAAU,wBAAuBI,SAAA,CACpCb,cAACH,EAAS,CAACE,MAAO,UAClBC,cAACe,EAAS,CAACE,MAAM,eAAKE,YAAY,iCAClCC,SAAU,SAACF,GAAK,OAAKY,EAAYZ,EAAM,IAEvClB,cAACe,EAAS,CAACC,KAAK,WAAWC,MAAM,eAAKE,YAAY,iCAChDC,SAAU,SAACkB,GAAQ,OAAKL,EAAYK,EAAS,IAE/CtC,cAAA,UAAQS,UAAU,YAAYK,QAAS,kBAAMU,EAAS,QAAQ,EAACX,SAAC,iBAChEL,eAAA,MAAIC,UAAU,cAAaI,SAAA,CAAC,uCAAMb,cAAA,KAAGuC,KAAK,UAAS1B,SAAC,qCAGxDb,cAAA,OAAKS,UAAU,4BAA2BI,SACxCb,cAACG,EAAQ,CACPC,QAASA,EACTC,sBAvBsB,WACxBD,EAAU,GACZgC,EAAWI,OAAOpC,GAAW,EAEjC,EAoBQE,qBA/BqB,WAC3B,IAAMmC,EAAQC,SAASC,iBAAiB,cACxCC,QAAQC,IAAIJ,EAAMK,QACd1C,EAAUqC,EAAMK,QAClBV,EAAWI,OAAOpC,GAAW,EAEjC,EA0BQG,eAnCe,SAACc,GACtBe,EAAWf,EAAEC,OAAOyB,QAAQC,GAC9B,UAsCF,EC7CaC,G,MAAe,WAC1B,IAAMzB,EAAWC,cACjBC,EAA8BC,mBAAS,GAAEC,EAAAC,YAAAH,EAAA,GAAlCtB,EAAOwB,EAAA,GAAEQ,EAAUR,EAAA,GAgB1B,OAAQ5B,cAAAqC,WAAA,CAAAxB,SACNL,eAAA,OAAKC,UAAU,qBAAoBI,SAAA,CACjCb,cAAA,OAAKS,UAAU,2BAA0BI,SACvCL,eAAA,OAAKC,UAAU,wBAAuBI,SAAA,CACpCb,cAACH,EAAS,CAACE,MAAO,UAClBC,cAAA,MAAIS,UAAU,sBAAqBI,SAAC,mCACpCb,cAAA,UAAQS,UAAU,YAAYK,QAAS,kBAAMU,EAAS,QAAQ,EAACX,SAAC,gDAChEL,eAAA,MAAIC,UAAU,cAAaI,SAAA,CAAC,uCAAMb,cAAA,KAAGuC,KAAK,SAAQ1B,SAAC,qCAGvDb,cAAA,OAAKS,UAAU,4BAA2BI,SACxCb,cAACG,EAAQ,CACPC,QAASA,EACTC,sBAlBsB,WACxBD,EAAU,GACZgC,EAAWI,OAAOpC,GAAW,EAEjC,EAeQE,qBA1BqB,WAC3B,IAAMmC,EAAQC,SAASC,iBAAiB,cACxCC,QAAQC,IAAIJ,EAAMK,QACd1C,EAAUqC,EAAMK,QAClBV,EAAWI,OAAOpC,GAAW,EAEjC,EAqBQG,eA9Be,SAACc,GACtBe,EAAWf,EAAEC,OAAOyB,QAAQC,GAC9B,UAiCF,GCvCaE,EAAa,WACxB,IAAAxB,EAAwBC,mBAAS,IAAGC,EAAAC,YAAAH,EAAA,GAAvByB,GAAFvB,EAAA,GAASA,EAAA,IACpBG,EAAgCJ,mBAAS,IAAGK,EAAAH,YAAAE,EAAA,GAA3BD,GAAFE,EAAA,GAAaA,EAAA,IAC5BE,EAAgCP,mBAAS,IAAGQ,EAAAN,YAAAK,EAAA,GAA3BD,GAAFE,EAAA,GAAaA,EAAA,IAC5BiB,EAA0BzB,mBAAS,IAAG0B,EAAAxB,YAAAuB,EAAA,GAAxBE,GAAFD,EAAA,GAAUA,EAAA,IACtBE,EAA8B5B,mBAAS,GAAE6B,EAAA3B,YAAA0B,EAAA,GAAlCnD,EAAOoD,EAAA,GAAEpB,EAAUoB,EAAA,GAgB1B,OAAQxD,cAAAqC,WAAA,CAAAxB,SACNL,eAAA,OAAKC,UAAU,qBAAoBI,SAAA,CACjCb,cAAA,OAAKS,UAAU,2BAA0BI,SACvCL,eAAA,OAAKC,UAAU,wBAAuBI,SAAA,CACpCb,cAACH,EAAS,CAACE,MAAO,UAClBC,cAACe,EAAS,CAACE,MAAM,eAAKE,YAAY,iCAChCC,SAAU,SAACF,GAAK,OAAKiC,EAAQjC,EAAM,IAErClB,cAACe,EAAS,CAACE,MAAM,eAAKE,YAAY,iCAChCC,SAAU,SAACF,GAAK,OAAKY,EAAYZ,EAAM,IAEzClB,cAACe,EAAS,CAACE,MAAM,eAAKE,YAAY,iCAChCC,SAAU,SAACF,GAAK,OAAKoC,EAASpC,EAAM,IAEtClB,cAACe,EAAS,CAACC,KAAK,WAAWC,MAAM,eAAKE,YAAY,iCAChDC,SAAU,SAACkB,GAAQ,OAAKL,EAAYK,EAAS,IAE/CtC,cAAA,UAAQS,UAAU,YAAWI,SAAC,iBAC9BL,eAAA,MAAIC,UAAU,cAAaI,SAAA,CAAC,6CAAOb,cAAA,KAAGuC,KAAK,SAAQ1B,SAAC,qCAGxDb,cAAA,OAAKS,UAAU,4BAA2BI,SACxCb,cAACG,EAAQ,CACPC,QAASA,EACTC,sBA7BsB,WACxBD,EAAU,GACZgC,EAAWI,OAAOpC,GAAW,EAEjC,EA0BQE,qBArCqB,WAC3B,IAAMmC,EAAQC,SAASC,iBAAiB,cACxCC,QAAQC,IAAIJ,EAAMK,QACd1C,EAAUqC,EAAMK,QAClBV,EAAWI,OAAOpC,GAAW,EAEjC,EAgCQG,eAzCe,SAACc,GACtBe,EAAWf,EAAEC,OAAOyB,QAAQC,GAC9B,UA4CF,E,6BCzDMS,EAAW,SAAH3D,GAA0D,IAArDkD,EAAElD,EAAFkD,GAAI/C,EAAGH,EAAHG,IAAKyD,EAAK5D,EAAL4D,MAAO5C,EAAOhB,EAAPgB,QAAS6C,EAAM7D,EAAN6D,OAAQC,EAAa9D,EAAb8D,cAClD,OACEpD,eAAA,OAAKC,UAAWkD,EAAS,kBAAoB,WAAW9C,SAAA,CACtDL,eAAA,OAAKC,UAAU,gBAAeI,SAAA,CAC5Bb,cAAA,OAAKC,IAAKA,EAAKC,IAAI,IAAIO,UAAU,kBACjCT,cAAA,QAAAa,SAAO6C,IACP1D,cAAA,OAAKS,UAAU,eAAeK,QAASA,EAAS,UAASkC,EAAI,aAAYU,OAE3E1D,cAAA,OAAKS,UAAU,0BAAyBI,SACtCb,cAAA,OAAKS,UAAU,MAAKI,SAClBb,cAAA,OAAKS,UAAU,qBAAqBK,QAAS8C,EAAe,UAASZ,EAAI,aAAYU,UAK/F,EAEaG,EAAqB,SAAHC,GAAgD,IAA1CC,EAAUD,EAAVC,WAAYjD,EAAOgD,EAAPhD,QAAS8C,EAAaE,EAAbF,cAClDI,EAAgBC,aAAaC,QAAQ,iBAc3C,OAbkBH,EAAWI,KAAI,SAAAC,GAC/B,OACEpE,cAACyD,EAAQ,CACPT,GAAIoB,EAASpB,GACb/C,IAAKmE,EAASnE,IACdyD,MAAOU,EAASV,MAChBC,OAAQS,EAASpB,KAAOR,OAAOwB,GAC/BlD,QAASA,EACT8C,cAAeA,GANFQ,EAASpB,GAS5B,GAGF,EClCaqB,EAAkB,SAAHvE,GAAiC,IAA5BwE,EAAYxE,EAAZwE,aAAcxD,EAAOhB,EAAPgB,QAuB7C,OArBIwD,EACUA,EAAaH,KAAI,SAAAI,GAC7B,OACE/D,eAAA,OAAoBC,UAAU,cAC9BK,QAASA,EACT,UAASyD,EAAMvB,GACf,WAAUuB,EAAMC,OAAO,GAAGC,IAC1B,aAAYF,EAAMG,KAClB,YAAWH,EAAMI,QAAQ,GAAGD,KAAK7D,SAAA,CAC/Bb,cAAA,OAAKC,IAAKsE,EAAMC,OAAO,GAAGC,IAAKvE,IAAKqE,EAAMG,KAAMjE,UAAU,eAC1DT,cAAA,KAAGS,UAAU,aAAYI,SAAE0D,EAAMG,OACjC1E,cAAA,KAAGS,UAAU,cAAaI,SAAE0D,EAAMI,QAAQ,GAAGD,OAC7C1E,cAAA,OAAKS,UAAU,gBAAeI,SAC5Bb,cAAA,OAAKS,UAAU,6BAVT8D,EAAMvB,GAcnB,IAEchD,cAAAqC,WAAA,CAAAxB,SAAEb,cAAA,OAAAa,SAAK,eAGxB,E,yBChBa+D,EAAa,WAExB,IAAIC,EAAa,IAAIC,IACrBpD,EAAsCC,mBAAS,IAAGC,EAAAC,YAAAH,EAAA,GAA3CqD,EAAWnD,EAAA,GAAEoD,EAAcpD,EAAA,GAClCG,EAAsCJ,mBAAS,IAAGK,EAAAH,YAAAE,EAAA,GAA3CkD,EAAWjD,EAAA,GAAEkD,EAAclD,EAAA,GAClCE,EAAkCP,mBAAS,IAAGQ,EAAAN,YAAAK,EAAA,GAAvCiD,EAAShD,EAAA,GAAEiD,EAAYjD,EAAA,GACxBX,EAAWC,cAWjB,SACe4D,IAAY,OAAAC,EAAAC,MAAC,KAADC,UAAA,UAAAF,IAkB1B,OAlB0BA,EAAAG,YAAAC,cAAAC,MAA3B,SAAAC,IAAA,IAAAC,EAAAC,EAAAC,EAAA,OAAAL,cAAAM,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAWoC,OAV5BN,EAAW,mCACXC,EAAe,mCACfC,EAAiB,CACrBK,OAAQ,OACRC,QAAS,CACP,eAAgB,oCAChB,cAAiB,SAAWC,KAAKT,EAAW,IAAMC,IAEpDS,KAAM,2CAA6CV,EAAW,kBAAoBC,GAEpFlD,QAAQC,IAAI,uBAAsBoD,EAAAE,KAAA,EAE5BK,MAAM,yCAA0CT,GACnDU,MAAK,SAAAC,GAAM,OAAIA,EAAOC,MAAM,IAC5BF,MAAK,SAAAG,GAAI,OAAI1B,EAAe0B,EAAKC,aAAa,IAAC,OAClDjE,QAAQC,IAAIoC,GACZJ,EAAWK,eAAeD,GAAY,wBAAAgB,EAAAa,OAAA,GAAAlB,EAAA,MACvCL,MAAA,KAAAC,UAAA,CACDuB,qBAAU,WACR1B,GACF,GAAG,IAGH,IAAM2B,EAAiB,eAAAlH,EAAA2F,YAAAC,cAAAC,MAAG,SAAAsB,EAAO5F,GAAC,OAAAqE,cAAAM,MAAA,SAAAkB,GAAA,cAAAA,EAAAhB,KAAAgB,EAAAf,MAAA,OACF,OAA9BnB,EAAe3D,EAAEC,OAAOJ,OAAMgG,EAAAf,KAAA,EACxBtB,EAAWsC,OAAOpC,EAAa,CAAC,QAAS,QAAQ,CAACqC,MAAO,KAC5DX,MAAK,SAAUG,GACdhE,QAAQC,IAAI,gBAAiB+D,EAAKS,OAAO5E,OACzC2C,EAAawB,EAAKS,OAAO5E,MAE3B,IAAG,SAAU6E,GACXlC,EAAa,IACbC,IACAzC,QAAQ2E,MAAMD,EAChB,IAAG,KAAD,mBAAAJ,EAAAJ,OAAA,GAAAG,EAAA,KACL,gBAZsBO,GAAA,OAAA1H,EAAAyF,MAAA,KAAAC,UAAA,KA4CvB,OAAQhF,eAAA6B,WAAA,CAAAxB,SAAA,CACJL,eAAA,OAAKC,UAAU,qBAAoBI,SAAA,CACjCL,eAAA,OAAKC,UAAU,YAAWI,SAAA,CACxBb,cAACH,EAAS,CAACE,MAAO,UAClBC,cAAA,SACFA,cAAC6D,EAAkB,CAACE,WAAY,CAC9B,CAAEf,GAAI,EAAGU,MAAO,2BAAQzD,IAAK,yBAA0BwH,QAAS,IAChE,CAAEzE,GAAI,EAAGU,MAAO,2BAAQzD,IAAK,uBAAwBwH,QAAS,IAC9D,CAAEzE,GAAI,EAAGU,MAAO,2BAAQzD,IAAK,uBAAwBwH,QAAS,IAC9D,CAAEzE,GAAI,EAAGU,MAAO,sBAAazD,IAAK,sBAAuBwH,QAAS,IAClE,CAAEzE,GAAI,EAAGU,MAAO,qBAAOzD,IAAK,uBAAwBwH,QAAS,OAE7DzH,cAAA,OAAKS,UAAU,eAAcI,SAAE,sCAEjCL,eAAA,OAAKC,UAAU,cAAaI,SAAA,CAC1Bb,cAAA,MAAAa,SAAI,iBACJb,cAAA,OAAKS,UAAU,qBAGjBD,eAAA,OAAKC,UAAU,aAAYI,SAAA,CACzBL,eAAA,OAAKC,UAAU,UAASI,SAAA,CACtBb,cAAA,OAAKC,IAAI,iDAAiDC,IAAI,GAAGO,UAAU,WAC3ET,cAAA,MAAIS,UAAU,WAAUI,SAAC,gBAE3BL,eAAA,OAAKC,UAAU,iBAAgBI,SAAA,CAC7Bb,cAAA,MAAAa,SAAI,6BACJb,cAAA,SACAQ,eAAA,OAAKC,UAAU,aAAYI,SAAA,CACzBb,cAAA,OAAKC,IAAI,wBAAwBC,IAAI,GAAGO,UAAU,cAClDT,cAAA,OAAKS,UAAU,aAAYI,SAACb,cAAA,KAAAa,SAAG,2EAEjCL,eAAA,OAAKC,UAAU,YAAWI,SAAA,CACxBb,cAAA,KAAGS,UAAU,kBAAiBI,SAAC,gBAC/Bb,cAAA,KAAGS,UAAU,iBAAgBI,SAAC,qCAC9Bb,cAAA,KAAGS,UAAU,mBAAkBI,SAAC,qIAElCb,cAAA,OAAKS,UAAU,SAAQI,SACrBL,eAAA,SAAOkH,UAAQ,EAAA7G,SAAA,CACbb,cAAA,UAAQC,IAAI,yEAAyEe,KAAK,eAAe,iEAOnHhB,cAAA,OAAKS,UAAU,gBACfD,eAAA,OAAKC,UAAU,4BAA2BI,SAAA,CACxCL,eAAA,OAAKC,UAAU,cAAaI,SAAA,CAC1Bb,cAAA,MAAAa,SAAI,wBACJb,cAAA,OAAAa,SACEb,cAAA,KAAGuC,KAAK,QAAO1B,SAAC,WAGpBb,cAAA,SACAA,cAAA,SAAOmB,YAAY,2BAAOV,UAAU,eAAeW,SAAU4F,IAC7DxG,eAAA,OAAKC,UAAU,SAAQI,SAAA,CACvBb,cAAA,OAAKS,UAAU,gBAAeI,SAC5Bb,cAACqE,EAAe,CAACC,aAAca,EAAWrE,QAvFpB,SAACO,GAC7B,IAAMsG,EAAkBjF,SAASkF,cAAc,kBAC3CD,GACFA,EAAgBE,UAAUC,OAAO,iBAEnCzG,EAAEC,OAAOyG,cAAcA,cAAcF,UAAUG,OAAO,gBACxD,MAmFMxH,eAAA,OAAKC,UAAU,eAAcI,SAAA,CAC3Bb,cAAA,OAAKS,UAAU,SAASK,QAAS,WAAOU,EAAS,QAAQ,EAAEX,SAAC,iBAC5Db,cAAA,OAAKS,UAAU,MAAMK,QAnFA,WAC3B,IAAM6G,EAAkBjF,SAASkF,cAAc,8BACzC5D,EAAgBC,aAAaC,QAAQ,iBAErC+D,EADaC,KAAKC,MAAMlE,aAAaC,QAAQ,eAClBC,KAAI,SAAAC,GACnC,OAAGA,EAASpB,KAAOR,OAAOwB,GACxBoE,wBAAA,GACMhE,GAAQ,IAAEqD,QAAQ,GAAD7G,OAAAyH,YACdjE,EAASqD,SAAO,CAAE,CACnBzE,GAAI2E,EAAgB5E,QAAQC,GAC9BsF,MAAOX,EAAgB5E,QAAQwF,IAC/BC,OAAQb,EAAgB5E,QAAQ2B,KAChChB,MAAOiE,EAAgB5E,QAAQW,WAKhCU,CACT,IACAH,aAAawE,QAAQ,aAAcP,KAAKQ,UAAUT,GACpD,EA+D2DpH,SAAC,wCAK9D,EChKa8H,G,MAAwB,SAAH7I,GAA4B,IAAvB2H,EAAO3H,EAAP2H,QAAS3G,EAAOhB,EAAPgB,QACxC8H,EAAYnB,EAAQtD,KAAI,SAAA0E,GAC5B,OACErI,eAAA,OAA0BC,UAAU,OAAMI,SAAA,CACxCb,cAAA,OAAKC,IAAK4I,EAAYP,MAAO7H,UAAU,eAAeP,IAAK2I,EAAYnF,QACvElD,eAAA,OAAKC,UAAU,YAAWI,SAAA,CACxBb,cAAA,MAAIS,UAAU,aAAYI,SAAEgI,EAAYnF,QACxC1D,cAAA,KAAGS,UAAU,YAAWI,SAAEgI,EAAYL,SACtCxI,cAAA,OAAKS,UAAU,WAAW,UAASoI,EAAY7F,GAAI,WAAU6F,EAAYP,MAAOxH,QAASA,EAAQD,SAAC,iBAAQb,cAAA,cALpG6I,EAAY7F,GAS1B,IACA,OACEhD,cAAA,OAAKS,UAAU,gBAAeI,SAC3B+H,GAGP,GCfaE,EAAgB,SAAHhJ,GAAmBA,EAAbiJ,cAAiE,IAAlDC,EAAWlJ,EAAXkJ,YAAaC,EAAWnJ,EAAXmJ,YAAaC,EAAgBpJ,EAAhBoJ,iBACjE1H,EAAWC,cACXuC,EAAgBC,aAAaC,QAAQ,iBACrCH,EAAamE,KAAKC,MAAMlE,aAAaC,QAAQ,eAC/CE,EAAW,CAACqD,QAAS,IAKzB,GAJsB,OAAlBzD,IACFI,EAAWL,EAAWvB,OAAOwB,GAAiB,IAG1B,OAAlBA,GAA0BI,EAASqD,QAAQ3E,OAAS,EACtD,OACEtC,eAAA6B,WAAA,CAAAxB,SAAA,CACAb,cAAC2I,EAAqB,CAAClB,QAASrD,EAASqD,QAAS3G,QAASkI,IAC3DhJ,cAAA,OAAKS,UAAU,gBAAeI,SAC5BL,eAAA,OAAKC,UAAU,oBAAmBI,SAAA,CAChCb,cAAA,OAAKC,IAAI,wBAAwBC,IAAI,GAAGO,UAAU,0BAClDT,cAAA,KAAAa,SAAG,2DACHb,cAAA,OAAKS,UAAU,UAAUK,QAAS,kBAAMU,EAAS,UAAU,EAACX,SAAC,+BAMrE,GAAsB,OAAlBmD,GAAsD,IAA5BI,EAASqD,QAAQ3E,OAC7C,OACE9C,cAAA,OAAKS,UAAU,gBAAeI,SAC5BL,eAAA,OAAKC,UAAU,oBAAmBI,SAAA,CAChCb,cAAA,OAAKC,IAAI,wBAAwBC,IAAI,GAAGO,UAAU,0BAClDT,cAAA,KAAAa,SAAG,4HACHb,cAAA,OAAKS,UAAU,UAAUK,QAAS,kBAAMU,EAAS,UAAU,EAACX,SAAC,4BAKrE,GAAsB,OAAlBmD,EAAuB,CACzB,IAAMmF,EAASjB,KAAKC,MAAMlE,aAAaC,QAAQ,eAC3C0E,EAAY,GAmChB,OAlCIO,IACFP,EAAYO,EAAOhF,KAAK,SAAAiF,GACtB,OACE5I,eAAA,OAAoBC,UAAU,aAAYI,SAAA,CACxCb,cAAA,OAAKC,IAAKmJ,EAAMd,MAAOpI,IAAI,GAAGO,UAAU,eACxCD,eAAA,OAAKC,UAAU,aAAYI,SAAA,CACzBL,eAAA,OAAKC,UAAU,cAAaI,SAAA,CACzBuI,EAAM1F,MACP1D,cAAA,OAAKS,UAAU,2BAA2BK,QAASoI,EACjD,UAASE,EAAMpG,GACf,WAAUoG,EAAMC,MAChB,YAAWD,EAAMZ,OACjB,YAAWY,EAAME,SACjB,aAAYF,EAAM1F,MAClB,WAAU0F,EAAMd,WAEpBtI,cAAA,OAAKS,UAAU,oBAAmBI,SAAEuI,EAAMZ,SAC1ChI,eAAA,OAAKC,UAAU,iBAAgBI,SAAA,CAC7Bb,cAAA,OAAKS,UAAU,WACb,WAAU2I,EAAMC,MAChBvI,QAASmI,EACT,YAAWG,EAAME,SACjB,aAAYF,EAAM1F,MAClB,WAAU0F,EAAMd,MAChB,YAAWc,EAAMZ,SACnBxI,cAAA,OAAKS,UAAU,sBAAqBI,SAClC0I,KAAKC,MAAMhH,OAAO4G,EAAME,UAAY,KAAS,UAC7CC,KAAKC,MAAMhH,OAAO4G,EAAME,UAAY,KAAQ,GAAK,oBAxB/CF,EAAMpG,GA6BpB,KAGA4F,CAEJ,CACF,EC9Eaa,EAAc,SAAH3J,GAA2B,IAAtB4J,EAAe5J,EAAf4J,gBA4B3B,OACElJ,eAAA,OAAKC,UAAU,iBAAgBI,SAAA,CAC7Bb,cAAA,MAAAa,SAAI,6BACJb,cAAA,SACAQ,eAAA,OAAKC,UAAU,aAAYI,SAAA,CACzBb,cAAA,OAAKC,IAAKyJ,EAAgBpB,MAAOpI,IAAI,GAAGO,UAAU,cAClDT,cAAA,OAAKS,UAAU,aAAYI,SAACb,cAAA,KAAAa,SAAI6I,EAAgBhG,aAElDlD,eAAA,OAAKC,UAAU,YAAWI,SAAA,CACxBb,cAAA,KAAGS,UAAU,kBAAiBI,SAAE6I,EAAgBlB,SAChDhI,eAAA,KAAGC,UAAU,iBAAgBI,SAAA,CAAC,cAzBpC,SAAuB8I,GACrB,IAAMC,EAAcpH,OAAOmH,GAAe,IAC1C,OAAGC,EAAc,KAEbL,KAAKM,MAAMD,EAAc,MAAQ,eACjCL,KAAKM,MAAMD,EAAc,IAAM,GAAK,SACpCL,KAAKM,MAAMD,EAAc,IAAM,SAI/BL,KAAKM,MAAMD,EAAc,IAAM,GAAK,SACpCL,KAAKM,MAAMD,EAAc,IAAM,QAGrC,CAWgDE,CAAcJ,EAAgBJ,aACxEtJ,cAAA,KAAGS,UAAU,mBAAkBI,SAAC,kOAElCL,eAAA,OAAKC,UAAU,SAAQI,SAAA,CACrBL,eAAA,SAAOkH,UAAQ,EAACjH,UAAU,YAAWI,SAAA,CACnCb,cAAA,UAAQC,IAAI,yEAAyEe,KAAK,eAAe,sDAG3GhB,cAAA,OAAKS,UAAU,WAAWK,QA5CZ,SAACO,GACnB,IAAMwG,EAASQ,YAAOhH,EAAEC,OAAOuG,WACzBkC,EAASrH,SAASkF,cAAc,cACtCvG,EAAEC,OAAOuG,UAAUG,OAAO,eACtBH,EAAUmC,SAAS,eACrBD,EAAOE,QAEPF,EAAOG,MAEX,SAuCF,E,iBCxCMnB,GADgBb,KAAKC,MAAMlE,aAAaC,QAAQ,kBAChC,CACpB,CAAElB,GAAI,EAAGU,MAAO,2BAAQzD,IAAK,2FAA4FwH,QAAS,IAClI,CAAEzE,GAAI,EAAGU,MAAO,2BAAQzD,IAAK,yFAA0FwH,QAAS,IAChI,CAAEzE,GAAI,EAAGU,MAAO,2BAAQzD,IAAK,yFAA0FwH,QAAS,IAChI,CAAEzE,GAAI,EAAGU,MAAO,sBAAazD,IAAK,wFAAyFwH,QAAS,IACpI,CAAEzE,GAAI,GAAIU,MAAO,qBAAOzD,IAAK,yFAA0FwH,QAAS,MAgB3H,IAAM0C,EAAW,WACtB,IAAAzI,EAA0CC,mBAAS,IAAGC,EAAAC,YAAAH,EAAA,GAA/CsC,EAAapC,EAAA,GAAEwI,EAAgBxI,EAAA,GACtCG,EAAkDJ,mBAAS,IAAGK,EAAAH,YAAAE,EAAA,GAAvDsI,EAAiBrI,EAAA,GAAEsI,EAAoBtI,EAAA,GAE9CE,EAAoCP,mBAASuG,KAAKC,MAAMlE,aAAaC,QAAQ,gBAAe/B,EAAAN,YAAAK,EAAA,GAArF6B,EAAU5B,EAAA,GAAEoI,EAAapI,EAAA,GAChCiB,EAA8CzB,mBAAS,CACrD+B,MAAO,oEACPgB,KAAM,cACN4D,MAAO,wBACPgB,SAAU,YACVjG,EAAAxB,YAAAuB,EAAA,GALKsG,EAAerG,EAAA,GAAEmH,EAAkBnH,EAAA,GAM1CE,EAA8C5B,mBAAS,IAAG6B,EAAA3B,YAAA0B,EAAA,GAAnDkH,EAAejH,EAAA,GAAEkH,EAAkBlH,EAAA,GACpChC,EAAWC,cAGTkJ,EAAkBzC,KAAKC,MAAMlE,aAAaC,QAAQ,eAClD0G,EAAkB3G,aAAaC,QAAQ,iBAC7CtB,QAAQC,IAAI8H,GACZ/H,QAAQC,IAAI+H,GACRD,GACF1G,aAAawE,QAAQ,aAAcP,KAAKQ,UAAUK,IAEhD6B,EAGFhI,QAAQC,IAAI,kBAAkB+H,GAF9B3G,aAAawE,QAAQ,gBAAiB,IAO1C,IA8BMoC,EAAkB,SAACxJ,GACvB,IAAMyJ,EAAYpI,SAASkF,cAAc,eACnCmD,EAAYrI,SAASkF,cAAc,eACnClD,EAAOrD,EAAEC,OAAOb,UAAUuK,MAAM,KAAK,GACrCC,EAAQvI,SAASkF,cAAc,IAADhH,OAAK8D,EAAI,WAC7CoG,EAAUjD,UAAUG,OAAO,UAC3B+C,EAAUlD,UAAUqD,IAAI,UACxBD,EAAMpD,UAAUG,OAAO,SACzB,EAGMmD,EAAoB,WACxB,IAAML,EAAYpI,SAASkF,cAAc,eAC1BlF,SAASC,iBAAiB,gBAClCyI,SAAS,SAAAH,GACdA,EAAMpD,UAAUqD,IAAI,SACtB,IACAJ,EAAUjD,UAAUG,OAAO,SAC7B,EAEMhB,EAAoB,SAAC3F,GAAQiJ,EAAqBjJ,EAAEC,OAAOJ,MAAO,EAqJxE,OAAQV,eAAA6B,WAAA,CAAAxB,SAAA,CACNL,eAAA,OAAKC,UAAU,qBAAoBI,SAAA,CACjCL,eAAA,OAAKC,UAAU,YAAWI,SAAA,CACxBb,cAACH,EAAS,CAACE,MAAO,UAClBC,cAAA,SACAA,cAAC6D,EAAkB,CACnBE,WAAYA,EACZjD,QA9MsB,SAACO,GAC3B,GAA2B,iBAAvBA,EAAEC,OAAOb,UAA6B,CACxC,IAAM4K,EAAc3I,SAASkF,cAAc,oBACvCyD,GAAaA,EAAYxD,UAAUC,OAAO,UAC9CzG,EAAEC,OAAOyG,cAAcA,cAAcF,UAAUqD,IAAI,UACnDR,EAAmBrJ,EAAEC,OAAOyB,QAAQW,OACpC0G,EAAiB5H,OAAOnB,EAAEC,OAAOyB,QAAQC,KACzCiB,aAAawE,QAAQ,gBAAiBjG,OAAOnB,EAAEC,OAAOyB,QAAQC,IAChE,CACF,EAsMMY,cAnMkB,SAACvC,GACvB,GAA2B,uBAAvBA,EAAEC,OAAOb,UAAmC,CAC9C,IAAMsK,EAAYrI,SAASkF,cAAc,eACzCmD,EAAUlD,UAAUG,OAAO,UAC3B,IAAIsD,EA1DV,SAAqBC,GAGnB,IAFA,IAAIC,EAAI,EACJC,EAAI,EACDF,GACLC,GAAKD,EAAQG,WAAaH,EAAQI,WAAaJ,EAAQK,WACvDH,GAAKF,EAAQM,UAAYN,EAAQI,WAAaJ,EAAQO,UACtDP,EAAUA,EAAQQ,aAGpB,MAAO,CAAEP,EAAGA,EAAGC,EAAGA,EACpB,CAgDqBO,CAAY3K,EAAEC,QAC7ByJ,EAAUrK,MAAMuL,IAAMX,EAASG,EAAK,KACpCV,EAAUrK,MAAMwL,KAAQZ,EAASE,EAAI,GAAM,KAEvB9I,SAASkF,cAAc,oBAC/BC,UAAUC,OAAO,UAC7BzG,EAAEC,OAAOyG,cAAcA,cAAcA,cAAcF,UAAUqD,IAAI,UAEjER,EAAmBrJ,EAAEC,OAAOyB,QAAQW,OACpC0G,EAAiB5H,OAAOnB,EAAEC,OAAOyB,QAAQC,KACzCiB,aAAawE,QAAQ,gBAAiBjG,OAAOnB,EAAEC,OAAOyB,QAAQC,IAChE,CACF,IAoLMhD,cAAA,OAAKS,UAAU,eAAeK,QAAS+J,EAAgBhK,SAAC,sCAE1DL,eAAA,OAAKC,UAAU,cAAaI,SAAA,CAC1Bb,cAAA,MAAAa,SAAI,iBACFb,cAAC8I,EAAa,CACdC,cAAeA,EACfC,YAtHgB,SAAC3H,GACvB4C,aAAakI,WAAW,WACxBlI,aAAakI,WAAW,aACxBlI,aAAawE,QAAQ,UAAWpH,EAAEC,OAAOyB,QAAQC,IACjDiB,aAAawE,QAAQ,YAAapH,EAAEC,OAAOyB,QAAQ0B,KACnDjD,EAAS,SACX,EAiHQyH,YA/GgB,SAAC5H,GACvB,IAAM+K,EAAc1J,SAASkF,cAAc,gBACrCmC,EAASrH,SAASkF,cAAc,cAChCtG,EAASD,EAAEC,OAAOyB,QAAQ0B,IAC5B2H,GAAeA,IAAgB/K,EAAEC,QACnC8K,EAAYvE,UAAUC,OAAO,eAG3BxG,GACFD,EAAEC,OAAOuG,UAAUG,OAAO,eAGxBoE,GAAeA,IAAgB/K,EAAEC,SACnCyI,EAAOE,QACPF,EAAO9J,IAAMqB,EACbyI,EAAOsC,OACPtC,EAAOG,QAGLkC,GAAeA,IAAgB/K,EAAEC,QACnCyI,EAAOE,QAGJmC,IACHrC,EAAO9J,IAAMqB,EACbyI,EAAOsC,OACPtC,EAAOG,QAETM,EAAmB,CACjB9G,MAAOrC,EAAEC,OAAOyB,QAAQW,MACxB8E,OAAQnH,EAAEC,OAAOyB,QAAQ2B,KACzB4D,MAAOjH,EAAEC,OAAOyB,QAAQwF,IACxBe,SAAUjI,EAAEC,OAAOyB,QAAQuJ,OAI7B,IAAMC,EAAgB7J,SAASkF,cAAc,WAC1C2E,GAAgBA,EAAc1E,UAAUC,OAAO,UAClDzG,EAAEC,OAAOyG,cAAcA,cAAcA,cAAcF,UAAUqD,IAAI,SAEnE,EAwEQhC,iBArE2B,SAAC7H,GAClC,IAAMmL,EAAWnE,YAAOhH,EAAEC,OAAOuG,WAC3B4E,EAAiBvE,KAAKC,MAAMlE,aAAaC,QAAQ,eACnDwI,EAAoB,GACxB,GAAIF,EAAYxC,SAAS,cACvB0C,EAAoBD,EAAeE,QAAO,SAAAC,GAAI,OAAIA,EAAK5J,KAAO3B,EAAEC,OAAOyB,QAAQC,EAAE,IACjF6J,IAAKC,KAAK,CACRC,SAAU,kGACVC,WAAY,IACZC,YAAa,GACbC,SAAU,iBACVC,MAAO,IACP7B,SAAU,aACV8B,mBAAmB,EACnBC,QAAS,OACTtN,MAAO,UAEJ,CACL,IAAMuN,EAAU,CACdtK,GAAI3B,EAAEC,OAAOyB,QAAQC,GACrBU,MAAOrC,EAAEC,OAAOyB,QAAQW,MACxB8E,OAAQnH,EAAEC,OAAOyB,QAAQ2B,KACzB4E,SAAUjI,EAAEC,OAAOyB,QAAQuJ,KAC3BjD,MAAOhI,EAAEC,OAAOyB,QAAQ0B,IACxB6D,MAAOjH,EAAEC,OAAOyB,QAAQwF,KAKxBmE,EAHGD,EAGc,GAAA7L,OAAAyH,YAAOoE,GAAc,CAAEa,IAFpB,CAACA,GAIvBT,IAAKC,KAAK,CACRC,SAAU,2FACVC,WAAY,IACZC,YAAa,GACbC,SAAU,cACVC,MAAO,IACP7B,SAAU,aACVvL,MAAO,IACPsN,QAAS,OACTD,mBAAmB,GAEvB,CACAnJ,aAAawE,QAAQ,aAAcP,KAAKQ,UAAUgE,IAClDrL,EAAEC,OAAOuG,UAAUG,OAAO,aAC5B,OA0BIxH,eAAA,OAAKC,UAAU,aAAYI,SAAA,CACzBL,eAAA,OAAKC,UAAU,UAASI,SAAA,CACtBb,cAAA,OAAKC,IAAI,iDAAiDC,IAAI,GAAGO,UAAU,WAC3ET,cAAA,MAAIS,UAAU,WAAUI,SAAC,gBAE3Bb,cAAA,OAAKS,UAAU,SAASK,QA7BJ,WACxBmD,aAAawE,QAAQ,gBAAiB,IACtCjH,EAAS,SACX,EA0ByDX,SAAC,iBAGpDb,cAACyJ,EAAW,CAACC,gBAAiBA,UAIlClJ,eAAA,OAAKC,UAAU,oBAAmBI,SAAA,CAChCb,cAAA,OAAKS,UAAU,gBAAgBK,QAAS+J,EAAgBhK,SAAC,6BACzDb,cAAA,SACAA,cAAA,OAAKS,UAAU,kBAAkBK,QAAS+J,EAAgBhK,SAAC,6BAC3Db,cAAA,SACAA,cAAA,OAAKS,UAAU,WAAWK,QAAS+J,EAAgBhK,SAAC,2BAEtDb,cAAA,OAAKS,UAAU,sBAEfD,eAAA,OAAKC,UAAU,gCAA+BI,SAAA,CAC5CL,eAAA,OAAKC,UAAU,cAAaI,SAAA,CAC1Bb,cAAA,MAAAa,SAAI,6BAASb,cAAA,OAAKc,QAASqK,EAAkBtK,SAAC,SAEhDb,cAAA,SACAA,cAAA,SAAOmB,YAAY,sBAAaV,UAAU,aAAaW,SAAU4F,IACjExG,eAAA,OAAKC,UAAU,SAAQI,SAAA,CACrBb,cAAA,OAAKS,UAAU,SAASK,QAASqK,EAAkBtK,SAAC,iBACpDb,cAAA,OAAKS,UAAU,MAAMK,QArLC,WAC1B,IAAMmH,EAAgBlE,EAAWI,KAAI,SAAAC,GACnC,OAAIA,EAASpB,KAAOgB,EAClBoE,wBAAA,GACKhE,GAAQ,IACXV,MAAO2G,IAGJjG,CACT,IACAH,aAAawE,QAAQ,aAAcP,KAAKQ,UAAUT,IAClDsC,EAActC,GACdkD,GACF,EAwKwDtK,SAAC,uBAGvDL,eAAA,OAAKC,UAAU,kCAAiCI,SAAA,CAC9CL,eAAA,OAAKC,UAAU,cAAaI,SAAA,CAC1Bb,cAAA,MAAAa,SAAI,6BAASb,cAAA,OAAKc,QAASqK,EAAkBtK,SAAC,SAEhDb,cAAA,SACAQ,eAAA,OAAAK,SAAA,CAAK,wCAAa4J,EAAgB,yBAClCjK,eAAA,OAAKC,UAAU,SAAQI,SAAA,CACrBb,cAAA,OAAKS,UAAU,SAASK,QAASqK,EAAkBtK,SAAC,iBACpDb,cAAA,OAAKS,UAAU,MAAMK,QAjLE,WAE3B,GAAqB,KAAlBkD,EAAqB,CACtB,IAAMiE,EAAgBlE,EAAW4I,QAAO,SAAAvI,GAAQ,OAAIA,EAASpB,KAAOgB,CAAa,IACjFC,aAAawE,QAAQ,aAAcP,KAAKQ,UAAUT,IAClDsC,EAActC,GACdyC,EAAmB,sBACnBN,EAAiB,IACjBnG,aAAawE,QAAQ,gBAAiB,IACtC0C,GACF,MACEoC,MAAM,6CAEV,EAoKyD1M,SAAC,uBAGxDL,eAAA,OAAKC,UAAU,+BAA8BI,SAAA,CAC3CL,eAAA,OAAKC,UAAU,cAAaI,SAAA,CAC1Bb,cAAA,MAAAa,SAAI,6BAASb,cAAA,OAAKc,QAASqK,EAAkBtK,SAAC,SAEhDb,cAAA,SACAA,cAAA,SAAOmB,YAAY,iCAAQV,UAAU,aAAaW,SAAU4F,IAC5DxG,eAAA,OAAKC,UAAU,SAAQI,SAAA,CACrBb,cAAA,OAAKS,UAAU,SAASK,QAASqK,EAAkBtK,SAAC,iBACpDb,cAAA,OAAKS,UAAU,MAAMK,QAxNA,WACzB,IAAMmH,EAAa,GAAArH,OAAAyH,YAAOtE,GAAU,CAAE,CACpCf,GAAIe,EAAWjB,OAAS,EACxBY,MAAO2G,EACPpK,IAAK,wFACLwH,QAAS,MAEXxD,aAAawE,QAAQ,aAAcP,KAAKQ,UAAUT,IAClDsC,EAActC,GACdkD,GACF,EA8MuDtK,SAAC,yBAI1D,ECvUa2M,G,MAAY,WACvB,IAAI3I,EAAa,IAAIC,IACrBpD,EAAsCC,mBAAS,IAAGC,EAAAC,YAAAH,EAAA,GAA3CuD,EAAWrD,EAAA,GAAEsD,EAActD,EAAA,GAClCG,EAA0CJ,mBAAS,IAAGK,EAAAH,YAAAE,EAAA,GAA/C0L,EAAazL,EAAA,GAAE0L,EAAgB1L,EAAA,GACtCE,EAAoCP,mBAAS,GAAEQ,EAAAN,YAAAK,EAAA,GAAxCyL,EAAUxL,EAAA,GAAEyL,EAAazL,EAAA,GAChCiB,EAA8BzB,mBAAS,+GAA8G0B,EAAAxB,YAAAuB,EAAA,GAA9IyK,EAAOxK,EAAA,GAAYA,EAAA,GAG1B,SAASgC,IACP,IAAMQ,EAAW,mCACXC,EAAe,mCACfC,EAAiB,CACrBK,OAAQ,OACRC,QAAS,CACP,eAAgB,oCAChB,cAAiB,SAAWC,KAAKT,EAAW,IAAMC,IAEpDS,KAAM,2CAA6CV,EAAW,kBAAoBC,GAEpFlD,QAAQC,IAAI,uBAEZ2D,MAAM,yCAA0CT,GAC7CU,MAAK,SAAAC,GAAM,OAAIA,EAAOC,MAAM,IAC5BF,MAAK,SAAAG,GAAI,OAAI1B,EAAe0B,EAAKC,aAAa,IACjDjE,QAAQC,IAAIoC,GACZJ,EAAWK,eAAeD,EAC5B,CA8CA,IAAM6I,EAAkB,SAACzM,GACvB,IAAM+K,EAAc1J,SAASkF,cAAc,gBACrCmC,EAASrH,SAASkF,cAAc,cAChCtG,EAASD,EAAEC,OAAOyB,QAAQ0B,IAChC7B,QAAQC,IAAIvB,GACT8K,GAAeA,IAAgB/K,EAAEC,QAClC8K,EAAYvE,UAAUC,OAAO,eAG3BxG,GACFD,EAAEC,OAAOuG,UAAUG,OAAO,eAGxBoE,GAAeA,IAAgB/K,EAAEC,SACnCyI,EAAOE,QACPF,EAAO9J,IAAMqB,EACbyI,EAAOsC,OACPtC,EAAOG,QAGLkC,GAAeA,IAAgB/K,EAAEC,QACnCyI,EAAOE,QAGLmC,IACFrC,EAAO9J,IAAMqB,EACbyI,EAAOsC,OACPtC,EAAOG,OAEX,EAEI6D,EAA6B,SAAC1M,GAClCuB,QAAQC,IAAIxB,EAAEC,OAAOyB,QAAQC,IAC7B,IAAMwJ,EAAWnE,YAAOhH,EAAEC,OAAOuG,WAC3B4E,EAAiBvE,KAAKC,MAAMlE,aAAaC,QAAQ,eACnDwI,EAAoB,GACxB,GAAIF,EAAYxC,SAAS,cACvB0C,EAAoBD,EAAeE,QAAO,SAAAC,GAAI,OAAIA,EAAK5J,KAAO3B,EAAEC,OAAOyB,QAAQC,EAAE,IACjF6J,IAAKC,KAAK,CACRC,SAAU,kGACVC,WAAY,IACZC,YAAa,GACbC,SAAU,iBACVC,MAAO,IACP7B,SAAU,aACV8B,mBAAmB,EACnBC,QAAS,OACTtN,MAAO,UAEJ,CACL,IAAMuN,EAAU,CACdtK,GAAI3B,EAAEC,OAAOyB,QAAQC,GACrBU,MAAOrC,EAAEC,OAAOyB,QAAQW,MACxB8E,OAAQnH,EAAEC,OAAOyB,QAAQ2B,KACzB4E,SAAUjI,EAAEC,OAAOyB,QAAQuJ,KAC3BjD,MAAOhI,EAAEC,OAAOyB,QAAQ0B,IACxB6D,MAAOjH,EAAEC,OAAOyB,QAAQwF,KAE1B3F,QAAQC,IAAIyK,GAIVZ,EAHGD,EAGc,GAAA7L,OAAAyH,YAAOoE,GAAc,CAAEa,IAFpB,CAACA,GAIvBT,IAAKC,KAAK,CACRC,SAAU,2FACVC,WAAY,IACZC,YAAa,GACbC,SAAU,cACVC,MAAO,IACP7B,SAAU,aACVvL,MAAO,IACPsN,QAAS,OACTD,mBAAmB,GAEvB,CACAnJ,aAAawE,QAAQ,aAAcP,KAAKQ,UAAUgE,IAClDrL,EAAEC,OAAOuG,UAAUG,OAAO,aAC5B,EAWE,OATAjB,qBAAU,WACR1B,GAGF,GAAG,IACgB,IAAfsI,IACF/K,QAAQC,IAAI8K,GAlId,WACE,IAAMK,EAAU/J,aAAaC,QAAQ,WAC/B+J,EAAYhK,aAAaC,QAAQ,aAEjCgK,EADkBhG,KAAKC,MAAMlE,aAAaC,QAAQ,eAClBC,KAAI,SAAAiF,GAAK,OAAIA,EAAMpG,EAAE,IAE3D6B,EAAWsJ,eAAeH,EAAS,CAAC5G,MAAO,KACxCX,MAAK,SAAUG,GACdhE,QAAQC,IAAI,gBAAiB+D,EAAKnE,OAClCmL,EAAcD,EAAa,GAC3BD,EAAiB9G,EAAKnE,MAAM0B,KAAI,SAAAiF,GAE9B,OACE5I,eAAA,OAAoBC,UAAU,aAAYI,SAAA,CACxCb,cAAA,OAAKC,IAAKgO,EAAW/N,IAAI,GAAGO,UAAU,eACtCD,eAAA,OAAKC,UAAU,aAAYI,SAAA,CACzBL,eAAA,OAAKC,UAAU,cAAaI,SAAA,CACzBuI,EAAM1E,KACP1E,cAAA,OAAKS,UAAWyN,EAAclE,SAASZ,EAAMpG,IAAM,2BAA6B,gBAChFlC,QAASiN,EACR,UAAS3E,EAAMpG,GACd,WAAUoG,EAAMgF,YAChB,YAAWhF,EAAMzE,QAAQ,GAAGD,KAC5B,YAAW0E,EAAMO,YACjB,aAAYP,EAAM1E,KAClB,WAAUuJ,OAEdjO,cAAA,OAAKS,UAAU,oBAAmBI,SAAEuI,EAAMzE,QAAQ,GAAGD,OACrDlE,eAAA,OAAKC,UAAU,iBAAgBI,SAAA,CAC7Bb,cAAA,OAAKS,UAAU,WAAWK,QAASgN,EAAiB,WAAU1E,EAAMgF,cACpEpO,cAAA,OAAKS,UAAU,sBAAqBI,SAClC0I,KAAKC,MAAMhH,OAAO4G,EAAMO,aAAe,KAAS,UAChDJ,KAAKC,MAAMhH,OAAO4G,EAAMO,aAAe,KAAQ,GAAK,oBAnBlDP,EAAMpG,GAwBpB,IACF,IAAG,SAAUsE,GACXjC,IACAzC,QAAQ2E,MAAMD,EAChB,GACJ,CAyFE+G,IAEM7N,eAAA6B,WAAA,CAAAxB,SAAA,CACNL,eAAA,OAAKC,UAAU,qBAAoBI,SAAA,CACjCL,eAAA,OAAKC,UAAU,YAAWI,SAAA,CACxBb,cAACH,EAAS,CAACE,MAAO,UAClBC,cAAA,SACAA,cAAC6D,EAAkB,CAACE,WAAY,CAC9B,CAAEf,GAAI,EAAGU,MAAO,2BAAQzD,IAAK,yBAA0BwH,QAAS,IAChE,CAAEzE,GAAI,EAAGU,MAAO,2BAAQzD,IAAK,uBAAwBwH,QAAS,IAC9D,CAAEzE,GAAI,EAAGU,MAAO,2BAAQzD,IAAK,uBAAwBwH,QAAS,IAC9D,CAAEzE,GAAI,EAAGU,MAAO,sBAAazD,IAAK,sBAAuBwH,QAAS,IAClE,CAAEzE,GAAI,EAAGU,MAAO,qBAAOzD,IAAK,uBAAwBwH,QAAS,OAE/DzH,cAAA,OAAKS,UAAU,eAAcI,SAAE,sCAEjCL,eAAA,OAAKC,UAAU,cAAaI,SAAA,CAC1Bb,cAAA,MAAAa,SAAI,iBACJb,cAAA,OAAKS,UAAU,qBAGjBD,eAAA,OAAKC,UAAU,aAAYI,SAAA,CACzBL,eAAA,OAAKC,UAAU,UAASI,SAAA,CACtBb,cAAA,OAAKC,IAAI,iDAAiDC,IAAI,GAAGO,UAAU,WAC3ET,cAAA,MAAIS,UAAU,WAAUI,SAAC,gBAE3BL,eAAA,OAAKC,UAAU,iBAAgBI,SAAA,CAC7Bb,cAAA,MAAAa,SAAI,6BACJb,cAAA,SACAQ,eAAA,OAAKC,UAAU,aAAYI,SAAA,CACzBb,cAAA,OAAKC,IAAI,wBAAwBC,IAAI,GAAGO,UAAU,cAClDT,cAAA,OAAKS,UAAU,aAAYI,SAACb,cAAA,KAAAa,SAAG,2EAEjCL,eAAA,OAAKC,UAAU,YAAWI,SAAA,CACxBb,cAAA,KAAGS,UAAU,kBAAiBI,SAAC,gBAC/Bb,cAAA,KAAGS,UAAU,iBAAgBI,SAAC,qCAC9Bb,cAAA,KAAGS,UAAU,mBAAkBI,SAAC,wTAElCb,cAAA,OAAKS,UAAU,SAAQI,SACrBL,eAAA,SAAOkH,UAAQ,EAACjH,UAAU,YAAWI,SAAA,CACnCb,cAAA,UAAQC,IAAK4N,EAAS7M,KAAK,eAAe,iEAOpDhB,cAAA,OAAKS,UAAU,gBACfD,eAAA,OAAKC,UAAU,2BAA0BI,SAAA,CACvCL,eAAA,OAAKC,UAAU,cAAaI,SAAA,CAC1Bb,cAAA,MAAAa,SAAI,iBACJb,cAAA,OAAAa,SACEb,cAAA,KAAGuC,KAAK,QAAO1B,SAAC,WAGpBb,cAAA,SACEA,cAAA,OAAKS,UAAU,mBAAkBI,SAC9B4M,SAIX,GCvMea,MAnBf,WAEE,OACEtO,cAAAqC,WAAA,CAAAxB,SACEb,cAACuO,IAAa,CAAA1N,SACVL,eAACgO,IAAM,CAAA3N,SAAA,CACLb,cAACyO,IAAK,CAACC,KAAK,QAAQnD,QAASvL,cAACuB,EAAS,MACvCvB,cAACyO,IAAK,CAACC,KAAK,SAASnD,QAASvL,cAACkD,EAAU,MACzClD,cAACyO,IAAK,CAACC,KAAK,WAAWnD,QAASvL,cAACiD,EAAY,MAC7CjD,cAACyO,IAAK,CAACC,KAAK,OAAOnD,QAASvL,cAACmK,EAAQ,MACrCnK,cAACyO,IAAK,CAACC,KAAK,SAASnD,QAASvL,cAAC4E,EAAU,MACzC5E,cAACyO,IAAK,CAACC,KAAK,QAAQnD,QAASvL,cAACwN,EAAS,MACvCxN,cAACyO,IAAK,CAACC,KAAK,IAAInD,QAASvL,cAACiD,EAAY,YAKlD,ECde0L,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBpI,MAAK,SAAA3G,GAAkD,IAA/CgP,EAAMhP,EAANgP,OAAQC,EAAMjP,EAANiP,OAAQC,EAAMlP,EAANkP,OAAQC,EAAMnP,EAANmP,OAAQC,EAAOpP,EAAPoP,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,EACV,GAEJ,ECJaO,IAASC,WAAW1M,SAAS2M,eAAe,SACpDC,OACHtP,cAACuP,IAAMC,WAAU,CAAA3O,SACfb,cAACsO,EAAG,OAORK,G","file":"static/js/main.bfba4bad.chunk.js","sourcesContent":["export function AlphaLogo ({width}){\r\n  return (\r\n    <img src=\"https://raw.githubusercontent.com/Leo5233/Spotify-capstone/master/src/assets/alpha-logo.png\" alt=\"logo\" width={width}/>\r\n  )\r\n}","export const SlideImg = ({ photoId, handleClickArrowMinus, handleClickArrowPlus, handleClickBar}) => {\r\n  return (\r\n    <div className=\"slide-show\" style={{ backgroundImage: `url('https://raw.githubusercontent.com/Leo5233/Spotify-capstone/master/src/assets/cover${photoId}.png')` }}>\r\n      <div className=\"previous-slide\" onClick={handleClickArrowMinus}>《</div>\r\n      <div className=\"next-slide\" onClick={handleClickArrowPlus}>》</div>\r\n      <div className=\"slide-bars\" onClick={handleClickBar}>\r\n        <div className=\"slide-bar\" data-id='1'></div>\r\n        <div className=\"slide-bar\" data-id='2'></div>\r\n        <div className=\"slide-bar\" data-id='3'></div>\r\n      </div>\r\n    </div>\r\n  )\r\n}","export const AuthInput = ({ type, label, value, placeholder, onChange }) => {\r\n  return (\r\n    <div className=\"input-container\">\r\n      <label className=\"input-label\">{label}</label>\r\n      <input className=\"auth-input\" type={type || \"text\"} placeholder={placeholder}\r\n        value={value}\r\n        onChange={(e) => onChange(e.target.value)} />\r\n    </div>\r\n  );\r\n};\r\n","import '../css/Login.scss'\r\nimport { AlphaLogo } from '../components/AlphaLogo'\r\nimport { SlideImg } from '../components/SlideImg'\r\nimport { AuthInput } from '../components/AuthInput'\r\nimport { useState } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\nexport const LoginPage = () => {\r\n  const navigate = useNavigate()\r\n  const [userName, setUserName] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [photoId, setPhotoId] = useState(1)\r\n  const handleClickBar = (e) => {\r\n    setPhotoId(e.target.dataset.id)\r\n  }\r\n  const handleClickArrowPlus = () => {\r\n    const items = document.querySelectorAll('.slide-bar')\r\n    console.log(items.length)\r\n    if (photoId < items.length) {\r\n      setPhotoId(Number(photoId) + 1)\r\n    }\r\n  }\r\n  const handleClickArrowMinus = () => {\r\n    if (photoId > 1) {\r\n      setPhotoId(Number(photoId) - 1)\r\n    }\r\n  }\r\n  return (<>\r\n    <div className=\"entrance-container\">\r\n      <div className=\"entrance-left-contentbox\">\r\n        <div className=\"entrance-left-content\">\r\n          <AlphaLogo width={'300px'} />\r\n          <AuthInput label=\"帳號\" placeholder=\"請輸入帳號\" \r\n          onChange={(value) => setUserName(value)}\r\n          />\r\n          <AuthInput type=\"password\" label=\"密碼\" placeholder=\"請輸入密碼\"\r\n            onChange={(password) => setPassword(password)}\r\n          />\r\n          <button className='login-btn' onClick={() => navigate('/main')}>登入</button>\r\n          <h6 className='signup-text'>沒有帳號嗎？<a href=\"/signup\">註冊帳號</a></h6> \r\n        </div>\r\n      </div>\r\n      <div className=\"entrance-right-contentbox\">\r\n        <SlideImg\r\n          photoId={photoId}\r\n          handleClickArrowMinus={handleClickArrowMinus}\r\n          handleClickArrowPlus={handleClickArrowPlus}\r\n          handleClickBar={handleClickBar}\r\n        />\r\n      </div>\r\n    </div>\r\n  </>)\r\n}\r\n","\r\nimport '../css/Entrance.scss'\r\nimport { AlphaLogo } from '../components/AlphaLogo'\r\nimport { SlideImg } from '../components/SlideImg'\r\nimport { useState } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\nexport const EntrancePage = () => {\r\n  const navigate = useNavigate()\r\n  const [photoId, setPhotoId] = useState(1)\r\n  const handleClickBar = (e) => {\r\n    setPhotoId(e.target.dataset.id)\r\n  }\r\n  const handleClickArrowPlus = () => {\r\n    const items = document.querySelectorAll('.slide-bar')\r\n    console.log(items.length)\r\n    if (photoId < items.length){\r\n      setPhotoId(Number(photoId) + 1)\r\n    }\r\n  }\r\n  const handleClickArrowMinus = () => {\r\n    if (photoId > 1) {\r\n      setPhotoId(Number(photoId) - 1)\r\n    }\r\n  }\r\n  return (<>\r\n    <div className=\"entrance-container\">\r\n      <div className=\"entrance-left-contentbox\">\r\n        <div className=\"entrance-left-content\">\r\n          <AlphaLogo width={'300px'} />  \r\n          <h5 className='entrance-logo-title'>Connecting Stories That Matter</h5>     \r\n          <button className='login-btn' onClick={() => navigate('login')}>使用SPOTIFY帳號登入</button> \r\n          <h6 className='signup-text'>沒有帳號嗎？<a href=\"signup\">註冊帳號</a></h6> \r\n        </div>\r\n      </div>\r\n      <div className=\"entrance-right-contentbox\">\r\n        <SlideImg \r\n          photoId={photoId}\r\n          handleClickArrowMinus={handleClickArrowMinus}\r\n          handleClickArrowPlus={handleClickArrowPlus}\r\n          handleClickBar={handleClickBar}\r\n        />\r\n      </div>\r\n    </div>\r\n  </>)\r\n}\r\n","import '../css/Login.scss'\r\nimport { AlphaLogo } from '../components/AlphaLogo'\r\nimport { SlideImg } from '../components/SlideImg'\r\nimport { AuthInput } from '../components/AuthInput'\r\nimport { useState } from 'react'\r\n\r\nexport const SignUpPage = () => {\r\n  const [name, setName] = useState('')\r\n  const [userName, setUserName] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [email, setEmail] = useState('')\r\n  const [photoId, setPhotoId] = useState(1)\r\n  const handleClickBar = (e) => {\r\n    setPhotoId(e.target.dataset.id)\r\n  }\r\n  const handleClickArrowPlus = () => {\r\n    const items = document.querySelectorAll('.slide-bar')\r\n    console.log(items.length)\r\n    if (photoId < items.length) {\r\n      setPhotoId(Number(photoId) + 1)\r\n    }\r\n  }\r\n  const handleClickArrowMinus = () => {\r\n    if (photoId > 1) {\r\n      setPhotoId(Number(photoId) - 1)\r\n    }\r\n  }\r\n  return (<>\r\n    <div className=\"entrance-container\">\r\n      <div className=\"entrance-left-contentbox\">\r\n        <div className=\"entrance-left-content\">\r\n          <AlphaLogo width={'300px'} />\r\n          <AuthInput label=\"暱稱\" placeholder=\"請輸入暱稱\"\r\n            onChange={(value) => setName(value)}\r\n          />\r\n          <AuthInput label=\"帳號\" placeholder=\"請輸入帳號\"\r\n            onChange={(value) => setUserName(value)}\r\n          />\r\n          <AuthInput label=\"信箱\" placeholder=\"請輸入信箱\"\r\n            onChange={(value) => setEmail(value)}\r\n          />\r\n          <AuthInput type=\"password\" label=\"密碼\" placeholder=\"請輸入密碼\"\r\n            onChange={(password) => setPassword(password)}\r\n          />\r\n          <button className='login-btn'>註冊</button>\r\n          <h6 className='signup-text'>已經有帳號嗎？<a href=\"/login\">點此登入</a></h6> \r\n        </div>\r\n      </div>\r\n      <div className=\"entrance-right-contentbox\">\r\n        <SlideImg\r\n          photoId={photoId}\r\n          handleClickArrowMinus={handleClickArrowMinus}\r\n          handleClickArrowPlus={handleClickArrowPlus}\r\n          handleClickBar={handleClickBar}\r\n        />\r\n      </div>\r\n    </div>\r\n  </>)\r\n}","\r\nconst Category = ({id, src, title, onClick, active, onClickToggle}) => {\r\n  return (\r\n    <div className={active ? \"category active\" : \"category\"} >\r\n      <div className=\"category-item\">\r\n        <img src={src} alt=\".\" className=\"category-icon\" />\r\n        <span>{title}</span>\r\n        <div className=\"action-scope\" onClick={onClick} data-id={id} data-title={title}></div>\r\n      </div>\r\n      <div className=\"category-item-selection\">\r\n        <div className=\"dot\">\r\n          <div className=\"panel-action-scope\" onClick={onClickToggle} data-id={id} data-title={title}></div>\r\n          </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport const CategoryCollection = ({ categories, onClick, onClickToggle }) => {\r\n  const nowCategoryId = localStorage.getItem('nowCategoryId')\r\n  const listItems = categories.map(category => {\r\n    return (\r\n      <Category key={category.id}\r\n        id={category.id}\r\n        src={category.src}\r\n        title={category.title}\r\n        active={category.id === Number(nowCategoryId) ? true : false}\r\n        onClick={onClick}\r\n        onClickToggle={onClickToggle}\r\n      />\r\n    )\r\n  }\r\n  )\r\n  return listItems\r\n}","export const AlbumCollection = ({searchResult, onClick}) => {\r\n  let listItems = []\r\n  if (searchResult){\r\n    listItems = searchResult.map(album => {\r\n    return (\r\n      <div key={album.id} className=\"result-card\" \r\n      onClick={onClick}\r\n      data-id={album.id}\r\n      data-img={album.images[1].url}\r\n      data-title={album.name}\r\n      data-name={album.artists[0].name}>\r\n        <img src={album.images[1].url} alt={album.name} className=\"album-icon\" />\r\n        <p className=\"album-name\">{album.name}</p>\r\n        <p className=\"artist-name\">{album.artists[0].name}</p>\r\n        <div className=\"search-select\">\r\n          <div className=\"search-select-action\"></div>\r\n        </div>\r\n      </div>\r\n    )\r\n   })\r\n  } else {\r\n    listItems = (<><div>no result</div></>)\r\n  }\r\n  return listItems\r\n}","import { AlphaLogo } from '../components/AlphaLogo'\r\nimport { CategoryCollection } from '../components/Category'\r\nimport { AlbumCollection } from '../components/AlbumCollection'\r\nimport { useEffect, useState } from 'react'\r\nimport '../css/Search.scss'\r\nimport SpotifyWebApi from 'spotify-web-api-js'\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\nexport const SearchPage = () => {\r\n\r\n  let spotifyApi = new SpotifyWebApi()\r\n  const [searchInput, setSearchInput] = useState('')\r\n  const [accessToken, setAccessToken] = useState('')\r\n  const [albumList, setAlbumList] = useState([])\r\n  const navigate = useNavigate()\r\n  // const scope = ['playlist-modify-public',\r\n  //     'playlist-read-private',\r\n  //     'playlist-modify-private',\r\n  //     'user-read-private',\r\n  //     'user-read-playback-position',\r\n  //     'user-library-read',\r\n  //     'playlist-read-collaborative',\r\n  //     'user-read-email'\r\n  //   ]\r\n\r\n  // first mission is to get authToken & set spotify api with this token\r\n  async function getAuthToken(){\r\n    const clientId = 'd7ae00490ab7405da79f4c323a438f40'\r\n    const clientSecret = 'a52a6f2d51e444a1976893df33907fd8'\r\n    const authParameters = {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/x-www-form-urlencoded',\r\n        'Authorization': 'Basic ' + btoa(clientId + ':' + clientSecret)\r\n      },\r\n      body: 'grant_type=client_credentials&client_id=' + clientId + '&client_secret=' + clientSecret\r\n    }\r\n    console.log('Trying to get token')\r\n\r\n    await fetch('https://accounts.spotify.com/api/token', authParameters)\r\n      .then(result => result.json())\r\n      .then(data => setAccessToken(data.access_token))\r\n    console.log(accessToken)\r\n    spotifyApi.setAccessToken(accessToken)\r\n  }\r\n  useEffect(() => {\r\n    getAuthToken()\r\n  }, [])\r\n\r\n  //use spotify api to search with user input and save the result by setAlbumList()\r\n  const handleChangeInput = async (e) => {\r\n    setSearchInput(e.target.value)\r\n    await spotifyApi.search(searchInput, ['album', 'show'],{limit: 20})\r\n      .then(function (data) {\r\n        console.log('search result', data.albums.items);\r\n        setAlbumList(data.albums.items)\r\n        // localStorage.setItem('staticPodcast', JSON.stringify(data.albums.items))\r\n      }, function (err) {\r\n        setAlbumList([])\r\n        getAuthToken()\r\n        console.error(err);\r\n      });\r\n  }\r\n\r\n  const handleClickSearchItem = (e) => {\r\n    const nowSelectedItem = document.querySelector('.search-active')\r\n    if (nowSelectedItem) {\r\n      nowSelectedItem.classList.remove('search-active')\r\n    }\r\n    e.target.parentElement.parentElement.classList.toggle('search-active')\r\n  }\r\n\r\n  const handleClickAddtoList = () => {\r\n    const nowSelectedItem = document.querySelector('.result-card.search-active') \r\n    const nowCategoryId = localStorage.getItem('nowCategoryId') \r\n    const categories = JSON.parse(localStorage.getItem('Categories'))\r\n    const newCategories = categories.map(category => {\r\n      if(category.id === Number(nowCategoryId)){\r\n        return (\r\n          {...category, content:[\r\n              ...category.content, { \r\n                id: nowSelectedItem.dataset.id,\r\n              image: nowSelectedItem.dataset.img,\r\n              artist: nowSelectedItem.dataset.name,\r\n              title: nowSelectedItem.dataset.title\r\n              }\r\n          ]}\r\n        )\r\n      }\r\n      return category\r\n    })\r\n    localStorage.setItem('Categories', JSON.stringify(newCategories))\r\n  }\r\n\r\n  return (<>\r\n      <div className=\"entrance-container\">\r\n        <div className=\"main-left\">\r\n          <AlphaLogo width={'150px'} />\r\n          <hr />\r\n        <CategoryCollection categories={[\r\n          { id: 1, title: '通勤清單', src: 'src/assets/commute.png', content: [] },\r\n          { id: 2, title: '讀書清單', src: 'src/assets/study.png', content: [] },\r\n          { id: 3, title: '睡前清單', src: 'src/assets/sleep.png', content: [] },\r\n          { id: 4, title: '我的Podcast', src: 'src/assets/home.png', content: [] },\r\n          { id: 5, title: '已收藏', src: 'src/assets/heart.png', content: [] }\r\n        ]}  />\r\n          <div className=\"add-category\" >+ &nbsp;新增分類</div>\r\n        </div>\r\n        <div className=\"main-center\">\r\n          <h2>早安</h2>\r\n          <div className=\"podcast-panel\">\r\n          </div>\r\n        </div>\r\n        <div className=\"main-right\">\r\n          <div className=\"profile\">\r\n            <img src=\"https://randomuser.me/api/portraits/men/17.jpg\" alt=\"\" className=\"avatar\" />\r\n            <h3 className=\"username\">John Don</h3>\r\n          </div>\r\n          <div className=\"playitem-panel\">\r\n            <h2>正在播放</h2>\r\n            <hr />\r\n            <div className=\"play-theme\">\r\n              <img src=\"src/assets/cover2.png\" alt=\"\" className=\"thumbnail\" />\r\n              <div className=\"theme-text\"><p>Starting Your Own Podcast: Tips, Tricks and Advice From Anchor...</p></div>\r\n            </div>\r\n            <div className=\"play-text\">\r\n              <p className=\"play-text-title\">Seinobo Sey</p>\r\n              <p className=\"play-text-date\">2023-04-08.1小時20分</p>\r\n              <p className=\"play-text-detail\">It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. </p>\r\n            </div>\r\n            <div className=\"player\">\r\n              <audio controls>\r\n                <source src=\"https://p.scdn.co/mp3-preview/2f37da1d4221f40b9d1a98cd191f4d6f1646ad17\" type=\"audio/mpeg\" />\r\n                Your browser does not support the audio element.\r\n              </audio>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"blur-cover \"></div>\r\n      <div className=\"search-modal search-panel\">\r\n        <div className=\"modal-title\">\r\n          <h3>新增podcast</h3>\r\n          <div>\r\n            <a href='/main'>x</a>\r\n          </div>\r\n        </div>\r\n        <hr />\r\n        <input placeholder=\"開始搜尋\" className=\"search-input\" onChange={handleChangeInput} />\r\n        <div className=\"yes-no\">\r\n        <div className=\"search-result\">\r\n          <AlbumCollection searchResult={albumList} onClick={handleClickSearchItem}/>\r\n        </div>\r\n        <div className=\"yes-no-panel\">\r\n          <div className=\"cancel\" onClick={() => {navigate('/main')}}>取消</div>\r\n          <div className=\"yes\" onClick={handleClickAddtoList}>確認新增</div>\r\n        </div>\r\n        </div>\r\n      </div>\r\n    </>)\r\n}","export const PodcastItemCollection = ({content, onClick}) => {\r\n  const listItems = content.map(podcastItem => {\r\n    return (\r\n      <div key={podcastItem.id} className=\"card\" >\r\n        <img src={podcastItem.image} className=\"card-img-top\" alt={podcastItem.title} />\r\n        <div className=\"card-body\">\r\n          <h5 className=\"card-title\">{podcastItem.title}</h5>\r\n          <p className=\"card-text\">{podcastItem.artist}</p>\r\n          <div className=\"more-btn\" data-id={podcastItem.id} data-url={podcastItem.image} onClick={onClick}>更多</div><br />\r\n        </div>\r\n      </div> \r\n    )\r\n  })\r\n  return (\r\n    <div className=\"podcast-panel\">\r\n      {listItems}\r\n    </div>\r\n  )\r\n}","import { useNavigate } from 'react-router-dom'\r\nimport { PodcastItemCollection } from './PodcastItemCollection'\r\n\r\nexport const CenterContent = ({ dummyCategory, onClickMore, onClickPlay, onClickSubscribe }) => {\r\n  const navigate = useNavigate()\r\n  const nowCategoryId = localStorage.getItem('nowCategoryId')\r\n  const categories = JSON.parse(localStorage.getItem('Categories'))\r\n  let category = {content: []}\r\n  if (nowCategoryId !== '99'){ //id=99 is for favorite\r\n    category = categories[Number(nowCategoryId) - 1]\r\n  }\r\n  \r\n  if (nowCategoryId !== '99' && category.content.length > 0){\r\n    return (\r\n      <>\r\n      <PodcastItemCollection content={category.content} onClick={onClickMore} />\r\n      <div className=\"podcast-panel\">\r\n        <div className=\"podcast-panel-add\">\r\n          <img src=\"src/assets/search.png\" alt=\"\" className=\"podcast-panel-add-img\" />\r\n          <p>點擊下方按鈕新增！</p>\r\n          <div className=\"add-btn\" onClick={() => navigate('/search')}>新增 Album</div>\r\n        </div>\r\n      </div>\r\n      </>\r\n    )\r\n  } \r\n  if (nowCategoryId !== '99' && category.content.length === 0) {\r\n    return (\r\n      <div className=\"podcast-panel\">\r\n        <div className=\"podcast-panel-add\">\r\n          <img src=\"src/assets/search.png\" alt=\"\" className=\"podcast-panel-add-img\" />\r\n          <p>您尚未加入任何album，可以點擊下方按鈕新增！</p>\r\n          <div className=\"add-btn\" onClick={() => navigate('/search')}>新增 Album</div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n  if (nowCategoryId === '99'){\r\n    const tracks = JSON.parse(localStorage.getItem('subscribed'))\r\n    let listItems = []\r\n    if (tracks) {\r\n      listItems = tracks.map( track => {\r\n        return (\r\n          <div key={track.id} className=\"track-card\">\r\n            <img src={track.image} alt=\"\" className=\"track-icon\" />\r\n            <div className=\"track-info\">\r\n              <div className=\"track-title\">\r\n                {track.title}\r\n                <div className=\"subscribe-tag subscribed\" onClick={onClickSubscribe}\r\n                  data-id={track.id}\r\n                  data-url={track.audio}\r\n                  data-name={track.artist}\r\n                  data-time={track.duration}\r\n                  data-title={track.title}\r\n                  data-img={track.image}></div>\r\n              </div>\r\n              <div className=\"track-description\">{track.artist}</div>\r\n              <div className=\"play-btn-panel\">\r\n                <div className=\"play-btn\" \r\n                  data-url={track.audio} \r\n                  onClick={onClickPlay}\r\n                  data-time={track.duration}\r\n                  data-title={track.title}\r\n                  data-img={track.image}\r\n                  data-name={track.artist}></div>\r\n                <div className=\"track-date-duration\">{\r\n                  Math.round(Number(track.duration) / 60000) + ' 分' +\r\n                  Math.round(Number(track.duration) / 1000) % 60 + ' 秒'}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )\r\n      })\r\n    }\r\n    return (\r\n      listItems\r\n    )\r\n  } \r\n}","export const NowPlayItem = ({nowPlayItemInfo}) => {\r\n\r\n  const handleClick = (e) => {\r\n    const classList = [...e.target.classList]\r\n    const player = document.querySelector('.nowPlayer')\r\n    e.target.classList.toggle('play-active')\r\n    if (classList.includes('play-active')){\r\n      player.pause()\r\n    } else {\r\n      player.play()\r\n    }\r\n  }\r\n\r\n  function calculateTime(duration_ms){\r\n    const totalSecond = Number(duration_ms) / 1000\r\n    if(totalSecond > 3600){\r\n      return (\r\n        Math.floor(totalSecond / 3600) + '小時' +\r\n        Math.floor(totalSecond / 60) % 60 + '分' +\r\n        Math.floor(totalSecond % 60) + '秒'\r\n      )\r\n    } else {\r\n      return (\r\n        Math.floor(totalSecond / 60) % 60 + '分' +\r\n        Math.floor(totalSecond % 60) + '秒'\r\n      )\r\n    }\r\n  }\r\n  return (\r\n    <div className=\"playitem-panel\">\r\n      <h2>正在播放</h2>\r\n      <hr />\r\n      <div className=\"play-theme\">\r\n        <img src={nowPlayItemInfo.image} alt=\"\" className=\"thumbnail\" />\r\n        <div className=\"theme-text\"><p>{nowPlayItemInfo.title}</p></div>\r\n      </div>\r\n      <div className=\"play-text\">\r\n        <p className=\"play-text-title\">{nowPlayItemInfo.artist}</p>\r\n        <p className=\"play-text-date\">2023-04-08.{calculateTime(nowPlayItemInfo.duration)}</p>\r\n        <p className=\"play-text-detail\">It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters. </p>\r\n      </div>\r\n      <div className=\"player\">\r\n        <audio controls className=\"nowPlayer\">\r\n          <source src=\"https://p.scdn.co/mp3-preview/2f37da1d4221f40b9d1a98cd191f4d6f1646ad17\" type=\"audio/mpeg\" />\r\n          Your browser does not support the audio element.\r\n        </audio>\r\n        <div className=\"play-btn\" onClick={handleClick}></div>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import { AlphaLogo } from '../components/AlphaLogo'\r\nimport '../css/Main.scss'\r\nimport { CategoryCollection } from '../components/Category'\r\nimport { CenterContent } from '../components/CenterContent'\r\nimport { NowPlayItem } from '../components/NowPlayItem'\r\nimport { useState, useEffect } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport Swal from 'sweetalert2'\r\n\r\nconst staticPodcast = JSON.parse(localStorage.getItem('staticPodcast'))\r\nconst dummyCategory = [\r\n  { id: 1, title: '通勤清單', src: 'https://raw.githubusercontent.com/Leo5233/Spotify-capstone/master/src/assets/commute.png', content: []},\r\n  { id: 2, title: '讀書清單', src: 'https://raw.githubusercontent.com/Leo5233/Spotify-capstone/master/src/assets/study.png', content: [] },\r\n  { id: 3, title: '睡前清單', src: 'https://raw.githubusercontent.com/Leo5233/Spotify-capstone/master/src/assets/sleep.png', content: [] },\r\n  { id: 4, title: '我的Podcast', src: 'https://raw.githubusercontent.com/Leo5233/Spotify-capstone/master/src/assets/home.png', content: [] },\r\n  { id: 99, title: '已收藏', src: 'https://raw.githubusercontent.com/Leo5233/Spotify-capstone/master/src/assets/heart.png', content: [] }\r\n]\r\n\r\n//count the coordination of an element\r\nfunction getPosition(element) {\r\n  let x = 0;\r\n  let y = 0;\r\n  while (element) {\r\n    x += element.offsetLeft - element.scrollLeft + element.clientLeft;\r\n    y += element.offsetTop - element.scrollLeft + element.clientTop;\r\n    element = element.offsetParent;\r\n  }\r\n\r\n  return { x: x, y: y };\r\n}\r\n\r\nexport const MainPage = () => {\r\n  const [nowCategoryId, setNowCategoryId] = useState(99)\r\n  const [inputCategoryName, setInputCategoryName] = useState('')\r\n\r\n  const [categories, setCategories] = useState(JSON.parse(localStorage.getItem('Categories')))\r\n  const [nowPlayItemInfo, setNowPlayItemInfo] = useState({\r\n    title: \"Starting Your Own Podcast: Tips, Tricks and Advice From Anchor...\",\r\n    name: \"Seinobo Sey\",\r\n    image: \"src/assets/cover2.png\",\r\n    duration: '4800000'\r\n  })\r\n  const [nowCategoryName, setNowCategoryName] = useState('')\r\n  const navigate = useNavigate()\r\n//use dummyCategories can reset categories to default\r\n\r\n    const localCategories = JSON.parse(localStorage.getItem('Categories'))\r\n    const localCategoryId = localStorage.getItem('nowCategoryId')\r\n    console.log(localCategories)\r\n    console.log(localCategoryId)\r\n    if(!localCategories){\r\n      localStorage.setItem('Categories', JSON.stringify(dummyCategory))\r\n    }\r\n    if(!localCategoryId){\r\n      localStorage.setItem('nowCategoryId', 99)\r\n    } else {\r\n      console.log('localCategoryId',localCategoryId)\r\n    }\r\n\r\n\r\n  //click different category and change the style by 'active' className\r\n  const handleClickCategory = (e) => {\r\n    if (e.target.className === 'action-scope'){\r\n      const nowCategory = document.querySelector('.category.active')\r\n      if (nowCategory){nowCategory.classList.remove('active')}\r\n      e.target.parentElement.parentElement.classList.add('active')\r\n      setNowCategoryName(e.target.dataset.title)\r\n      setNowCategoryId(Number(e.target.dataset.id))\r\n      localStorage.setItem('nowCategoryId', Number(e.target.dataset.id))\r\n    }\r\n  }\r\n\r\n  //click and show panel with edit, delete, add function\r\n  const handleClickEdit = (e) => {\r\n    if (e.target.className === 'panel-action-scope'){\r\n      const editPanel = document.querySelector('.edit-panel')\r\n      editPanel.classList.toggle('d-none')\r\n      let position = getPosition(e.target)\r\n      editPanel.style.top = position.y  + \"px\";\r\n      editPanel.style.left = (position.x + 20) + \"px\";\r\n      //按下點點視同新的被選中的category 隨之更換樣式\r\n      const nowCategory = document.querySelector('.category.active')\r\n      nowCategory.classList.remove('active')\r\n      e.target.parentElement.parentElement.parentElement.classList.add('active')\r\n      //傳遞給CenterContent使用\r\n      setNowCategoryName(e.target.dataset.title)\r\n      setNowCategoryId(Number(e.target.dataset.id))\r\n      localStorage.setItem('nowCategoryId', Number(e.target.dataset.id))\r\n    }\r\n  }\r\n\r\n  const handleShowModal = (e) => {\r\n    const blurcover = document.querySelector('.blur-cover')\r\n    const editPanel = document.querySelector('.edit-panel')\r\n    const name = e.target.className.split('-')[0] //[edit]-category, [delete]-category, [add]-category\r\n    const modal = document.querySelector(`.${name}-modal`)\r\n    blurcover.classList.toggle('d-none')\r\n    editPanel.classList.add('d-none')\r\n    modal.classList.toggle('d-none')\r\n  }\r\n\r\n  // click cancel or x to go back to main page\r\n  const handleClickGoBack = () => {\r\n    const blurcover = document.querySelector('.blur-cover')\r\n    const modals = document.querySelectorAll('.modal-panel')\r\n    modals.forEach( modal => {\r\n      modal.classList.add('d-none')\r\n    })\r\n    blurcover.classList.toggle('d-none')\r\n  }\r\n\r\n  const handleChangeInput = (e) => { setInputCategoryName(e.target.value) }\r\n\r\n  //add new category \r\n  const handleClickSaveAdd = () => {\r\n    const newCategories = [...categories, {\r\n      id: categories.length + 1,\r\n      title: inputCategoryName,\r\n      src: 'https://raw.githubusercontent.com/Leo5233/Spotify-capstone/master/src/assets/home.png',\r\n      content: []\r\n    }]\r\n    localStorage.setItem('Categories', JSON.stringify(newCategories))\r\n    setCategories(newCategories)\r\n    handleClickGoBack()\r\n  }\r\n\r\n  //edit the name of a category\r\n  const handleClickSaveEdit = () => {\r\n    const newCategories = categories.map(category => {\r\n      if (category.id === nowCategoryId) {\r\n        return {\r\n          ...category,\r\n          title: inputCategoryName\r\n        }\r\n      }\r\n      return category\r\n    }) \r\n    localStorage.setItem('Categories', JSON.stringify(newCategories))\r\n    setCategories(newCategories)\r\n    handleClickGoBack()\r\n  }\r\n\r\n  const handleDeleteCategory = () => {\r\n    //刪除後就回到已收藏類別，且已收藏不能刪除\r\n    if(nowCategoryId !== 99){\r\n      const newCategories = categories.filter(category => category.id !== nowCategoryId)\r\n      localStorage.setItem('Categories', JSON.stringify(newCategories))\r\n      setCategories(newCategories)\r\n      setNowCategoryName('已收藏')\r\n      setNowCategoryId(99)\r\n      localStorage.setItem('nowCategoryId', 99)\r\n      handleClickGoBack()\r\n    } else {\r\n      alert('此類別不可刪除')\r\n    }\r\n  }\r\n\r\n  const handleClickMore = (e) => {\r\n    localStorage.removeItem('albumId')\r\n    localStorage.removeItem('albumIcon')\r\n    localStorage.setItem('albumId', e.target.dataset.id)\r\n    localStorage.setItem('albumIcon', e.target.dataset.url)\r\n    navigate('/track')\r\n  }\r\n\r\n  const handleClickPlay = (e) => {\r\n    const nowPlayItem = document.querySelector('.play-active')\r\n    const player = document.querySelector('.nowPlayer')\r\n    const target = e.target.dataset.url\r\n    if (nowPlayItem && nowPlayItem !== e.target) {\r\n      nowPlayItem.classList.remove('play-active')\r\n    }\r\n    //有的track沒有音檔連結就不變換圖示\r\n    if (target) {\r\n      e.target.classList.toggle('play-active')\r\n    }\r\n    //播放中點擊另一個則載入新track\r\n    if (nowPlayItem && nowPlayItem !== e.target) {\r\n      player.pause()\r\n      player.src = target\r\n      player.load()\r\n      player.play()\r\n    }\r\n    //播放中再點一次同一個則暫停\r\n    if (nowPlayItem && nowPlayItem === e.target) {\r\n      player.pause()\r\n    }\r\n    //初次按下直接開始播放\r\n    if (!nowPlayItem) {\r\n      player.src = target\r\n      player.load()\r\n      player.play()\r\n    }    \r\n    setNowPlayItemInfo({\r\n      title: e.target.dataset.title,\r\n      artist: e.target.dataset.name,\r\n      image: e.target.dataset.img,\r\n      duration: e.target.dataset.time\r\n    })\r\n\r\n    //播放項目加邊框\r\n    const oldAcitveItem = document.querySelector('.active')\r\n    if(oldAcitveItem){ oldAcitveItem.classList.remove('active')}\r\n    e.target.parentElement.parentElement.parentElement.classList.add('active')\r\n\r\n  }\r\n\r\n\r\n  const handleClickToggleSubscribe = (e) => {\r\n    const targetClass = [...e.target.classList]\r\n    const subscribedList = JSON.parse(localStorage.getItem('subscribed'))\r\n    let newSubscribedList = []\r\n    if (targetClass.includes('subscribed')) { //unsubscribe   \r\n      newSubscribedList = subscribedList.filter(item => item.id !== e.target.dataset.id)\r\n      Swal.fire({\r\n        imageUrl: 'https://raw.githubusercontent.com/Leo5233/Spotify-capstone/master/src/assets/success_remove.png',\r\n        imageWidth: 150,\r\n        imageHeight: 50,\r\n        imageAlt: 'success remove',\r\n        timer: 1000,\r\n        position: 'bottom-end',\r\n        showConfirmButton: false,\r\n        padding: '0rem',\r\n        width: 250\r\n      })\r\n    } else { //subscribe\r\n      const newData = {\r\n        id: e.target.dataset.id,\r\n        title: e.target.dataset.title,\r\n        artist: e.target.dataset.name,\r\n        duration: e.target.dataset.time,\r\n        audio: e.target.dataset.url,\r\n        image: e.target.dataset.img\r\n      }\r\n      if (!subscribedList) { //subscribe first time\r\n        newSubscribedList = [newData]\r\n      } else { //subscribe\r\n        newSubscribedList = [...subscribedList, newData]\r\n      }\r\n      Swal.fire({\r\n        imageUrl: 'https://raw.githubusercontent.com/Leo5233/Spotify-capstone/master/src/assets/success.png',\r\n        imageWidth: 150,\r\n        imageHeight: 50,\r\n        imageAlt: 'success add',\r\n        timer: 1000,\r\n        position: 'bottom-end',\r\n        width: 250,\r\n        padding: '0rem',\r\n        showConfirmButton: false\r\n      })\r\n    }\r\n    localStorage.setItem('subscribed', JSON.stringify(newSubscribedList))\r\n    e.target.classList.toggle('subscribed')    \r\n  }\r\n\r\n  const handleClickLogout = () => {\r\n    localStorage.setItem('nowCategoryId', 99)\r\n    navigate('/login')\r\n  }\r\n\r\n  return (<>\r\n    <div className=\"entrance-container\">\r\n      <div className=\"main-left\">\r\n        <AlphaLogo width={'150px'} />\r\n        <hr />\r\n        <CategoryCollection \r\n        categories={categories} \r\n        onClick={handleClickCategory}\r\n        onClickToggle={handleClickEdit}/>\r\n        <div className=\"add-category\" onClick={handleShowModal}>+ &nbsp;新增分類</div>\r\n      </div>\r\n      <div className=\"main-center\">\r\n        <h2>早安</h2>\r\n          <CenterContent \r\n          dummyCategory={dummyCategory} \r\n          onClickMore={handleClickMore}\r\n          onClickPlay={handleClickPlay}\r\n          onClickSubscribe={handleClickToggleSubscribe}/>\r\n      </div>\r\n      <div className=\"main-right\">\r\n        <div className=\"profile\">\r\n          <img src=\"https://randomuser.me/api/portraits/men/17.jpg\" alt=\"\" className=\"avatar\" />\r\n          <h3 className=\"username\">John Don</h3>\r\n        </div>\r\n        <div className=\"logout\" onClick={handleClickLogout}>\r\n          登出\r\n        </div>\r\n        <NowPlayItem nowPlayItemInfo={nowPlayItemInfo}/>\r\n      </div>\r\n    </div>\r\n    {/* all element below are not visible by default */}\r\n    <div className=\"edit-panel d-none\">\r\n      <div className=\"edit-category\" onClick={handleShowModal}>編輯分類</div>\r\n      <hr/>\r\n      <div className=\"delete-category\" onClick={handleShowModal}>刪除分類</div>\r\n      <hr/>\r\n      <div className=\"add-item\" onClick={handleShowModal}>新增podcast</div>\r\n    </div>\r\n    <div className=\"blur-cover d-none\"></div>\r\n    {/* three different modal for edit, delete, add */}\r\n    <div className=\"edit-modal modal-panel d-none\">\r\n      <div className=\"modal-title\">\r\n        <h3>編輯分類</h3><div onClick={handleClickGoBack}>x</div>\r\n      </div>\r\n      <hr />\r\n      <input placeholder=\"我的Podcast\"  className=\"edit-input\" onChange={handleChangeInput} />\r\n      <div className=\"yes-no\">\r\n        <div className=\"cancel\" onClick={handleClickGoBack}>取消</div>\r\n        <div className=\"yes\" onClick={handleClickSaveEdit}>儲存</div>\r\n      </div>\r\n    </div>\r\n    <div className=\"delete-modal modal-panel d-none\">\r\n      <div className=\"modal-title\">\r\n        <h3>刪除分類</h3><div onClick={handleClickGoBack}>x</div>\r\n      </div>\r\n      <hr />\r\n      <div>是否確定刪除&quot;{nowCategoryName}&quot;分類？</div>\r\n      <div className=\"yes-no\">\r\n        <div className=\"cancel\" onClick={handleClickGoBack}>取消</div>\r\n        <div className=\"yes\" onClick={handleDeleteCategory}>刪除</div>\r\n      </div>\r\n    </div>\r\n    <div className=\"add-modal modal-panel d-none\">\r\n      <div className=\"modal-title\">\r\n        <h3>新增分類</h3><div onClick={handleClickGoBack}>x</div>\r\n      </div>\r\n      <hr />\r\n      <input placeholder=\"請輸入名稱\" className=\"edit-input\" onChange={handleChangeInput} />\r\n      <div className=\"yes-no\">\r\n        <div className=\"cancel\" onClick={handleClickGoBack}>取消</div>\r\n        <div className=\"yes\" onClick={handleClickSaveAdd}>儲存</div>\r\n      </div>\r\n    </div>\r\n  </>)\r\n}\r\n","import { AlphaLogo } from '../components/AlphaLogo'\r\nimport { CategoryCollection } from '../components/Category'\r\nimport { useEffect, useState } from 'react'\r\nimport '../css/Track.scss'\r\nimport SpotifyWebApi from 'spotify-web-api-js'\r\nimport Swal from 'sweetalert2'\r\n\r\nexport const TrackPage = () => {\r\n  let spotifyApi = new SpotifyWebApi()\r\n  const [accessToken, setAccessToken] = useState('')\r\n  const [tracksContent, setTracksContent] = useState('')\r\n  const [bugCounter, setBugCounter] = useState(0)\r\n  const [nowPlay, setNowPlay] = useState('https://p.scdn.co/mp3-preview/0bfd163c75bc37c20d9e8598a055a4465a4836bd?cid=d7ae00490ab7405da79f4c323a438f40')\r\n\r\n  // first mission is to get authToken & set spotify api with this token\r\n  function getAuthToken() {\r\n    const clientId = 'd7ae00490ab7405da79f4c323a438f40'\r\n    const clientSecret = 'a52a6f2d51e444a1976893df33907fd8'\r\n    const authParameters = {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/x-www-form-urlencoded',\r\n        'Authorization': 'Basic ' + btoa(clientId + ':' + clientSecret)\r\n      },\r\n      body: 'grant_type=client_credentials&client_id=' + clientId + '&client_secret=' + clientSecret\r\n    }\r\n    console.log('Trying to get token')\r\n\r\n    fetch('https://accounts.spotify.com/api/token', authParameters)\r\n      .then(result => result.json())\r\n      .then(data => setAccessToken(data.access_token))\r\n    console.log(accessToken)\r\n    spotifyApi.setAccessToken(accessToken)\r\n  }\r\n  // read albumId from localStorage, which is sent when user click 'more' button at main page \r\n  function getAlbumTrack() {\r\n    const albumId = localStorage.getItem('albumId')\r\n    const albumIcon = localStorage.getItem('albumIcon')\r\n    const subscribedItems = JSON.parse(localStorage.getItem('subscribed'))\r\n    const subscribedIds = subscribedItems.map(track => track.id)\r\n    // 將拿到的資料全部做渲染，並化成dataset參數透過handleClickToggleSubscribe存到localStorage，給mainPage使用\r\n    spotifyApi.getAlbumTracks(albumId, {limit: 20}) \r\n      .then(function (data) {\r\n        console.log('search tracks', data.items);\r\n        setBugCounter(bugCounter + 1)\r\n        setTracksContent(data.items.map(track => {\r\n        \r\n          return (\r\n            <div key={track.id} className=\"track-card\">\r\n              <img src={albumIcon} alt=\"\" className=\"track-icon\" />\r\n              <div className=\"track-info\">\r\n                <div className=\"track-title\">\r\n                  {track.name}\r\n                  <div className={subscribedIds.includes(track.id) ? \"subscribe-tag subscribed\" : \"subscribe-tag\"} \r\n                  onClick={handleClickToggleSubscribe}\r\n                   data-id={track.id}\r\n                    data-url={track.preview_url}\r\n                    data-name={track.artists[0].name}\r\n                    data-time={track.duration_ms}\r\n                    data-title={track.name}\r\n                    data-img={albumIcon}></div>\r\n                </div>\r\n                <div className=\"track-description\">{track.artists[0].name}</div>\r\n                <div className=\"play-btn-panel\">\r\n                  <div className=\"play-btn\" onClick={handleClickPlay} data-url={track.preview_url} ></div>\r\n                  <div className=\"track-date-duration\">{\r\n                    Math.round(Number(track.duration_ms) / 60000) + ' 分' +\r\n                    Math.round(Number(track.duration_ms) / 1000) % 60 + ' 秒'}</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )\r\n        }))\r\n      }, function (err) {\r\n        getAuthToken()\r\n        console.error(err);\r\n      });\r\n  }\r\n\r\n  const handleClickPlay = (e) => {\r\n    const nowPlayItem = document.querySelector('.play-active')\r\n    const player = document.querySelector('.nowPlayer')\r\n    const target = e.target.dataset.url\r\n    console.log(target)\r\n    if(nowPlayItem && nowPlayItem !== e.target){\r\n      nowPlayItem.classList.remove('play-active')     \r\n    }\r\n    //有的沒有音檔連結就不變換圖示\r\n    if (target) {\r\n      e.target.classList.toggle('play-active')\r\n    }\r\n    //播放中點另一個則載入新track\r\n    if (nowPlayItem && nowPlayItem !== e.target) {\r\n      player.pause()\r\n      player.src = target\r\n      player.load()\r\n      player.play()\r\n    }\r\n    //播放中再點一次同一個則暫停\r\n    if (nowPlayItem && nowPlayItem === e.target) {\r\n      player.pause()\r\n    }\r\n    //初次按下直接開始播放\r\n    if(!nowPlayItem){\r\n      player.src = target\r\n      player.load()\r\n      player.play()\r\n    }\r\n  }\r\n\r\nconst handleClickToggleSubscribe = (e) => {\r\n  console.log(e.target.dataset.id)\r\n  const targetClass = [...e.target.classList]\r\n  const subscribedList = JSON.parse(localStorage.getItem('subscribed'))\r\n  let newSubscribedList = []\r\n  if (targetClass.includes('subscribed')){ //unsubscribe   \r\n    newSubscribedList = subscribedList.filter(item => item.id !== e.target.dataset.id)\r\n    Swal.fire({\r\n      imageUrl: 'https://raw.githubusercontent.com/Leo5233/Spotify-capstone/master/src/assets/success_remove.png',\r\n      imageWidth: 150,\r\n      imageHeight: 50,\r\n      imageAlt: 'success remove',\r\n      timer: 1000,\r\n      position: 'bottom-end',\r\n      showConfirmButton: false,\r\n      padding: '0rem',\r\n      width: 250\r\n    })\r\n  } else { //subscribe\r\n    const newData = {\r\n      id: e.target.dataset.id,\r\n      title: e.target.dataset.title,\r\n      artist: e.target.dataset.name,\r\n      duration: e.target.dataset.time,\r\n      audio: e.target.dataset.url,\r\n      image: e.target.dataset.img\r\n    }\r\n    console.log(newData)\r\n    if (!subscribedList) { //subscribe first time\r\n      newSubscribedList = [newData]\r\n    } else { //subscribe\r\n      newSubscribedList = [...subscribedList, newData]\r\n    }\r\n    Swal.fire({\r\n      imageUrl: 'https://raw.githubusercontent.com/Leo5233/Spotify-capstone/master/src/assets/success.png',\r\n      imageWidth: 150,\r\n      imageHeight: 50,\r\n      imageAlt: 'success add',\r\n      timer: 1000,\r\n      position: 'bottom-end',\r\n      width: 250,\r\n      padding: '0rem',\r\n      showConfirmButton: false\r\n    })\r\n  }\r\n  localStorage.setItem('subscribed', JSON.stringify(newSubscribedList))\r\n  e.target.classList.toggle('subscribed')\r\n}\r\n\r\n  useEffect(() => {\r\n    getAuthToken()\r\n    // getAlbumTrack() somehow doesn't work if this is here\r\n    \r\n  }, [])\r\n  if (bugCounter === 0) { \r\n    console.log(bugCounter) //to avoid from loading over and over\r\n    getAlbumTrack()}\r\n    \r\n  return (<>\r\n    <div className=\"entrance-container\">\r\n      <div className=\"main-left\">\r\n        <AlphaLogo width={'150px'} />\r\n        <hr />\r\n        <CategoryCollection categories={[\r\n          { id: 1, title: '通勤清單', src: 'src/assets/commute.png', content: [] },\r\n          { id: 2, title: '讀書清單', src: 'src/assets/study.png', content: [] },\r\n          { id: 3, title: '睡前清單', src: 'src/assets/sleep.png', content: [] },\r\n          { id: 4, title: '我的Podcast', src: 'src/assets/home.png', content: [] },\r\n          { id: 5, title: '已收藏', src: 'src/assets/heart.png', content: [] }\r\n        ]} />\r\n        <div className=\"add-category\" >+ &nbsp;新增分類</div>\r\n      </div>\r\n      <div className=\"main-center\">\r\n        <h2>早安</h2>\r\n        <div className=\"podcast-panel\">\r\n        </div>\r\n      </div>\r\n      <div className=\"main-right\">\r\n        <div className=\"profile\">\r\n          <img src=\"https://randomuser.me/api/portraits/men/17.jpg\" alt=\"\" className=\"avatar\" />\r\n          <h3 className=\"username\">John Don</h3>\r\n        </div>\r\n        <div className=\"playitem-panel\">\r\n          <h2>正在播放</h2>\r\n          <hr />\r\n          <div className=\"play-theme\">\r\n            <img src=\"src/assets/cover2.png\" alt=\"\" className=\"thumbnail\" />\r\n            <div className=\"theme-text\"><p>Starting Your Own Podcast: Tips, Tricks and Advice From Anchor...</p></div>\r\n          </div>\r\n          <div className=\"play-text\">\r\n            <p className=\"play-text-title\">Seinobo Sey</p>\r\n            <p className=\"play-text-date\">2023-04-08.1小時20分</p>\r\n            <p className=\"play-text-detail\">It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using Content here, content here, making it look like readable English. </p>\r\n          </div>\r\n          <div className=\"player\">\r\n            <audio controls className=\"nowPlayer\">\r\n              <source src={nowPlay} type=\"audio/mpeg\" />\r\n              Your browser does not support the audio element.\r\n            </audio>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div className=\"blur-cover \"></div>\r\n    <div className=\"track-modal search-panel\">\r\n      <div className=\"modal-title\">\r\n        <h3>曲目</h3>\r\n        <div>\r\n          <a href='/main'>x</a>\r\n        </div>\r\n      </div>\r\n      <hr />\r\n        <div className=\"tracks-container\">\r\n          {tracksContent}\r\n        </div>\r\n    </div>\r\n  </>)\r\n}","import './App.scss'\nimport { BrowserRouter, Route, Routes } from 'react-router-dom';\nimport { LoginPage } from './pages/LoginPage'\nimport { EntrancePage } from './pages/EntrancePage'\nimport { SignUpPage } from './pages/SignupPage'\nimport { SearchPage } from './pages/Search'\nimport { MainPage } from './pages/MainPage'\nimport { TrackPage } from './pages/TrackPage'\n\nfunction App() {\n\n  return (\n    <>\n      <BrowserRouter >\n          <Routes>\n            <Route path=\"login\" element={<LoginPage />} />\n            <Route path=\"signup\" element={<SignUpPage />} />\n            <Route path=\"entrance\" element={<EntrancePage />} />\n            <Route path=\"main\" element={<MainPage />} />\n            <Route path=\"search\" element={<SearchPage />} />\n            <Route path=\"track\" element={<TrackPage />} />\n            <Route path=\"*\" element={<EntrancePage />} />\n          </Routes>\n      </BrowserRouter>\n    </>\n  )\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom/client';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nconst root = ReactDOM.createRoot(document.getElementById('root'));\r\nroot.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}